{"version":3,"file":"assets/js/980.442388c5.js","mappings":"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","sources":["webpack://roamio-web/./src/views/RegisterView.vue","webpack://roamio-web/./src/views/RegisterView.vue?1ec6"],"sourcesContent":["<template>\r\n  <div class=\"register-container\">\r\n    <div class=\"container py-5\">\r\n      <div class=\"row justify-content-center\">\r\n        <div class=\"col-md-6 col-lg-5\">\r\n          <div class=\"card shadow\">\r\n            <div class=\"card-body p-5\">\r\n              <h2 class=\"text-center mb-4\">用户注册</h2>\r\n              \r\n              <!-- 错误提示 -->\r\n              <div v-if=\"errorMessage\" class=\"alert alert-danger\">\r\n                {{ errorMessage }}\r\n              </div>\r\n              \r\n              <!-- 成功提示 -->\r\n              <div v-if=\"successMessage\" class=\"alert alert-success\">\r\n                {{ successMessage }}\r\n              </div>\r\n              \r\n              <form @submit.prevent=\"handleRegister\">\r\n                <!-- 用户名 -->\r\n                <div class=\"mb-3\">\r\n                  <label for=\"username\" class=\"form-label\">用户名</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    id=\"username\"\r\n                    v-model=\"formData.username\"\r\n                    required\r\n                    :disabled=\"submitting\"\r\n                    placeholder=\"请输入用户名\"\r\n                  />\r\n                  <div v-if=\"errors.username\" class=\"text-danger small mt-1\">\r\n                    {{ errors.username }}\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- 邮箱（可选） -->\r\n                <div class=\"mb-3\">\r\n                  <label for=\"email\" class=\"form-label\">邮箱（可选）</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    class=\"form-control\"\r\n                    id=\"email\"\r\n                    v-model=\"formData.email\"\r\n                    :disabled=\"submitting\"\r\n                    placeholder=\"请输入邮箱\"\r\n                  />\r\n                  <div v-if=\"errors.email\" class=\"text-danger small mt-1\">\r\n                    {{ errors.email }}\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- 密码 -->\r\n                <div class=\"mb-3\">\r\n                  <label for=\"password\" class=\"form-label\">密码</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    class=\"form-control\"\r\n                    id=\"password\"\r\n                    v-model=\"formData.password\"\r\n                    required\r\n                    :disabled=\"submitting\"\r\n                    placeholder=\"请输入密码\"\r\n                  />\r\n                  <div v-if=\"errors.password\" class=\"text-danger small mt-1\">\r\n                    {{ errors.password }}\r\n                  </div>\r\n                  <small class=\"text-muted\">\r\n                    密码至少8位，包含字母和数字\r\n                  </small>\r\n                </div>\r\n                \r\n                <!-- 确认密码 -->\r\n                <div class=\"mb-4\">\r\n                  <label for=\"password2\" class=\"form-label\">确认密码</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    class=\"form-control\"\r\n                    id=\"password2\"\r\n                    v-model=\"formData.password2\"\r\n                    required\r\n                    :disabled=\"submitting\"\r\n                    placeholder=\"请再次输入密码\"\r\n                  />\r\n                  <div v-if=\"errors.password2\" class=\"text-danger small mt-1\">\r\n                    {{ errors.password2 }}\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- 提交按钮 -->\r\n                <button\r\n                  type=\"submit\"\r\n                  class=\"btn btn-primary w-100 mb-3\"\r\n                  :disabled=\"submitting\"\r\n                >\r\n                  <span v-if=\"submitting\" class=\"spinner-border spinner-border-sm me-2\"></span>\r\n                  {{ submitting ? '注册中...' : '注册' }}\r\n                </button>\r\n                \r\n                <!-- 登录链接 -->\r\n                <div class=\"text-center\">\r\n                  <span class=\"text-muted\">已有账号？</span>\r\n                  <router-link to=\"/login\" class=\"text-decoration-none\">\r\n                    立即登录\r\n                  </router-link>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useUserStore } from '@/stores'\r\n\r\nexport default {\r\n  name: 'RegisterView',\r\n  \r\n  setup() {\r\n    const router = useRouter()\r\n    const userStore = useUserStore()\r\n    \r\n    const formData = ref({\r\n      username: '',\r\n      email: '',\r\n      password: '',\r\n      password2: ''\r\n    })\r\n    \r\n    const errors = ref({})\r\n    const errorMessage = ref('')\r\n    const successMessage = ref('')\r\n    const submitting = ref(false)\r\n    \r\n    // 表单验证\r\n    const validateForm = () => {\r\n      errors.value = {}\r\n      \r\n      if (!formData.value.username) {\r\n        errors.value.username = '请输入用户名'\r\n        return false\r\n      }\r\n      \r\n      if (formData.value.username.length < 3) {\r\n        errors.value.username = '用户名至少3个字符'\r\n        return false\r\n      }\r\n      \r\n      if (!formData.value.password) {\r\n        errors.value.password = '请输入密码'\r\n        return false\r\n      }\r\n      \r\n      if (formData.value.password.length < 8) {\r\n        errors.value.password = '密码至少8位'\r\n        return false\r\n      }\r\n      \r\n      if (!formData.value.password2) {\r\n        errors.value.password2 = '请再次输入密码'\r\n        return false\r\n      }\r\n      \r\n      if (formData.value.password !== formData.value.password2) {\r\n        errors.value.password2 = '两次密码不一致'\r\n        return false\r\n      }\r\n      \r\n      return true\r\n    }\r\n    \r\n    // 处理注册\r\n    const handleRegister = async () => {\r\n      errorMessage.value = ''\r\n      successMessage.value = ''\r\n      \r\n      if (!validateForm()) {\r\n        return\r\n      }\r\n      \r\n      submitting.value = true\r\n      \r\n      try {\r\n        await userStore.register({\r\n          username: formData.value.username,\r\n          email: formData.value.email || undefined,\r\n          password: formData.value.password,\r\n          password2: formData.value.password2\r\n        })\r\n        \r\n        successMessage.value = '注册成功！正在跳转...'\r\n        \r\n        // 2秒后跳转到首页\r\n        setTimeout(() => {\r\n          router.push('/')\r\n        }, 2000)\r\n        \r\n      } catch (error) {\r\n        console.error('注册失败:', error)\r\n        \r\n        // 处理错误信息\r\n        if (error.response?.data) {\r\n          const data = error.response.data\r\n          \r\n          // 如果是字段错误\r\n          if (typeof data === 'object') {\r\n            if (data.username) {\r\n              errors.value.username = Array.isArray(data.username) ? data.username[0] : data.username\r\n            }\r\n            if (data.email) {\r\n              errors.value.email = Array.isArray(data.email) ? data.email[0] : data.email\r\n            }\r\n            if (data.password) {\r\n              errors.value.password = Array.isArray(data.password) ? data.password[0] : data.password\r\n            }\r\n            if (data.password2) {\r\n              errors.value.password2 = Array.isArray(data.password2) ? data.password2[0] : data.password2\r\n            }\r\n            \r\n            // 如果有通用错误消息\r\n            if (data.detail || data.message || data.error) {\r\n              errorMessage.value = data.detail || data.message || data.error\r\n            }\r\n          } else {\r\n            errorMessage.value = '注册失败，请稍后重试'\r\n          }\r\n        } else {\r\n          errorMessage.value = '网络错误，请检查网络连接'\r\n        }\r\n      } finally {\r\n        submitting.value = false\r\n      }\r\n    }\r\n    \r\n    return {\r\n      formData,\r\n      errors,\r\n      errorMessage,\r\n      successMessage,\r\n      submitting,\r\n      handleRegister\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-container {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.card {\r\n  border: none;\r\n  border-radius: 15px;\r\n}\r\n\r\n.card-body {\r\n  background: white;\r\n  border-radius: 15px;\r\n}\r\n\r\nh2 {\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n.form-label {\r\n  font-weight: 500;\r\n  color: #555;\r\n}\r\n\r\n.form-control {\r\n  border-radius: 8px;\r\n  padding: 12px;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.form-control:focus {\r\n  border-color: #667eea;\r\n  box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);\r\n}\r\n\r\n.btn-primary {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border: none;\r\n  border-radius: 8px;\r\n  padding: 12px;\r\n  font-weight: 600;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\r\n}\r\n\r\n.btn-primary:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.alert {\r\n  border-radius: 8px;\r\n}\r\n</style>\r\n\r\n","import { render } from \"./RegisterView.vue?vue&type=template&id=7bb54761&scoped=true\"\nimport script from \"./RegisterView.vue?vue&type=script&lang=js\"\nexport * from \"./RegisterView.vue?vue&type=script&lang=js\"\n\nimport \"./RegisterView.vue?vue&type=style&index=0&id=7bb54761&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7bb54761\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","$setup","errorMessage","_hoisted_7","_toDisplayString","successMessage","_hoisted_8","onSubmit","_cache","_withModifiers","args","handleRegister","_hoisted_9","for","type","id","formData","username","$event","required","disabled","submitting","placeholder","errors","_hoisted_11","_hoisted_12","email","_hoisted_14","_hoisted_15","password","_hoisted_17","_hoisted_18","password2","_hoisted_20","_hoisted_22","_hoisted_23","_createVNode","_component_router_link","to","name","setup","router","useRouter","userStore","useUserStore","ref","validateForm","value","length","async","register","undefined","setTimeout","push","error","console","response","data","Array","isArray","detail","message","__exports__","render"],"sourceRoot":""}