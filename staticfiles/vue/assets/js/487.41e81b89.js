"use strict";(self["webpackChunkroamio_web"]=self["webpackChunkroamio_web"]||[]).push([[487],{485:function(s,a,t){t.d(a,{B:function(){return i},Yf:function(){return n},jw:function(){return r},nN:function(){return l}});var e=t(7277);const n=s=>e.A.get("/trips/",{params:s}),i=async s=>{try{return await e.A.get(`/trip-plans/${s}/`)}catch(a){const t=a.response?.status||a.status,n=404===t||"ERR_BAD_REQUEST"===a.code||a.message?.includes("404")||!a.response;if(n)return await e.A.get(`/trips/${s}/`);throw a}},l=s=>e.A.post(`/trips/${s}/like/`),r=s=>e.A.post(`/trips/${s}/checkin/`)},6487:function(s,a,t){t.r(a),t.d(a,{default:function(){return R}});var e=t(6768),n=t(4232);const i={class:"trip-list-container"},l={key:0,class:"text-center py-5"},r={key:1,class:"vine-container"},o=["onClick"],c={class:"icon"},d={class:"info"},u={class:"trip-title"},v={class:"desc"},k={class:"stats"},p={class:"stat-item"},g={class:"stat-item"},L={class:"stat-item"},b=["onClick"],m={class:"icon"},f={class:"info"},w={class:"trip-title"},_={class:"desc"},h={class:"stats"},y={class:"stat-item"},C={class:"stat-item"},E={class:"stat-item"};function W(s,a,t,W,F,x){const I=(0,e.g2)("NavBar");return(0,e.uX)(),(0,e.CE)("div",i,[(0,e.bF)(I),a[3]||(a[3]=(0,e.Lk)("div",{class:"main-header"},[(0,e.Lk)("h1",{class:"title"},"旅行树")],-1)),a[4]||(a[4]=(0,e.Lk)("div",{class:"welcome"},[(0,e.eW)(" 欢迎来到旅行计划与交流平台！"),(0,e.Lk)("br"),(0,e.eW)(" 发现精彩行程，记录美好旅途，和朋友一起分享旅行故事。 ")],-1)),W.loading?((0,e.uX)(),(0,e.CE)("div",l,[...a[0]||(a[0]=[(0,e.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,e.Lk)("span",{class:"visually-hidden"},"加载中...")],-1)])])):((0,e.uX)(),(0,e.CE)("div",r,[a[1]||(a[1]=(0,e.Lk)("div",{class:"vine-line"},null,-1)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(W.originalTrips,(s,a)=>((0,e.uX)(),(0,e.CE)("div",{key:s.slug,class:(0,n.C4)(["fruit",`fruit-${a+1}`]),onClick:a=>W.goToDetail(s.slug)},[(0,e.Lk)("span",c,(0,n.v_)(W.getIcon(a)),1),(0,e.Lk)("div",d,[(0,e.Lk)("div",u,(0,n.v_)(s.name),1),(0,e.Lk)("div",v,(0,n.v_)(s.description),1),(0,e.Lk)("div",k,[(0,e.Lk)("span",p,"👁️ "+(0,n.v_)(s.stats.views),1),(0,e.Lk)("span",g,"❤️ "+(0,n.v_)(s.stats.likes),1),(0,e.Lk)("span",L,"💬 "+(0,n.v_)(s.stats.comments_count),1)])])],10,o))),128)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(W.newTrips,(s,a)=>((0,e.uX)(),(0,e.CE)("div",{key:s.slug,class:(0,n.C4)(["fruit",`fruit-${5+a+1}`]),onClick:a=>W.goToDetail(s.slug)},[(0,e.Lk)("span",m,(0,n.v_)(W.getIcon(a+5)),1),(0,e.Lk)("div",f,[(0,e.Lk)("div",w,(0,n.v_)(s.name),1),(0,e.Lk)("div",_,(0,n.v_)(s.description),1),(0,e.Lk)("div",h,[(0,e.Lk)("span",y,"👁️ "+(0,n.v_)(s.stats.views),1),(0,e.Lk)("span",C,"❤️ "+(0,n.v_)(s.stats.likes),1),(0,e.Lk)("span",E,"💬 "+(0,n.v_)(s.stats.comments_count),1)])])],10,b))),128)),a[2]||(a[2]=(0,e.Fv)('<div class="fruit fruit-coming-soon" style="pointer-events:none;" data-v-2161567e><span class="icon" data-v-2161567e>⏳</span><div class="info" data-v-2161567e><div class="trip-title" data-v-2161567e>敬请期待</div><div class="desc" data-v-2161567e>更多精彩行程即将上线，欢迎持续关注！</div><div class="date" data-v-2161567e>Coming soon...</div></div></div>',1))])),a[5]||(a[5]=(0,e.Lk)("div",{class:"footer"},[(0,e.eW)(" © 2025 旅行计划平台 | 旅行社区"),(0,e.Lk)("br"),(0,e.eW)(" 技术支持：Vue 3 + Django REST Framework ")],-1))])}t(4114);var F=t(144),x=t(8512),I=t(485),X=t(9814),A={name:"TripListView",components:{NavBar:X.A},setup(){const s=(0,x.rd)(),a=(0,F.KR)([]),t=(0,F.KR)(!0),n=async()=>{t.value=!0;try{const s=await(0,I.Yf)();a.value=s.results||s||[]}catch(s){console.error("获取旅行列表失败:",s)}finally{t.value=!1}},i=a=>{s.push(`/trip/${a}/`)},l=s=>{const a=["🏖️","🌊","🏙️","🌄","🌇"];return a[s]||"🗺️"},r=(0,e.EW)(()=>a.value.slice(0,5)),o=(0,e.EW)(()=>a.value.slice(5));return(0,e.sV)(()=>{n()}),{trips:a,originalTrips:r,newTrips:o,loading:t,goToDetail:i,getIcon:l}}},T=t(1241);const $=(0,T.A)(A,[["render",W],["__scopeId","data-v-2161567e"]]);var R=$},9814:function(s,a,t){t.d(a,{A:function(){return y}});var e=t(6768),n=t(4232),i=t(5130);const l={class:"navbar navbar-expand-lg navbar-dark bg-primary shadow-sm sticky-top"},r={class:"container-fluid"},o={class:"collapse navbar-collapse",id:"navbarNav",style:{overflow:"visible"}},c={class:"navbar-nav me-auto"},d={class:"nav-item"},u={key:0,class:"nav-item"},v={class:"d-flex align-items-center"},k={key:0,class:"dropdown dropdown-end"},p={href:"#",class:"d-flex align-items-center text-white text-decoration-none dropdown-toggle user-dropdown-btn",id:"dropdownUser","data-bs-toggle":"dropdown","aria-expanded":"false"},g=["src"],L={class:"dropdown-menu dropdown-menu-end text-small","aria-labelledby":"dropdownUser"};function b(s,a,t,b,m,f){const w=(0,e.g2)("router-link");return(0,e.uX)(),(0,e.CE)("nav",l,[(0,e.Lk)("div",r,[(0,e.bF)(w,{to:"/",class:"navbar-brand"},{default:(0,e.k6)(()=>[...a[1]||(a[1]=[(0,e.Lk)("span",{class:"brand-text"},"Roamio",-1)])]),_:1}),a[9]||(a[9]=(0,e.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[(0,e.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,e.Lk)("div",o,[(0,e.Lk)("ul",c,[(0,e.Lk)("li",d,[(0,e.bF)(w,{to:"/",class:"nav-link"},{default:(0,e.k6)(()=>[...a[2]||(a[2]=[(0,e.Lk)("i",{class:"bi bi-house-door me-1"},null,-1),(0,e.eW)(" 旅行列表 ",-1)])]),_:1})]),b.isLoggedIn?((0,e.uX)(),(0,e.CE)("li",u,[(0,e.bF)(w,{to:"/my-trips/",class:"nav-link"},{default:(0,e.k6)(()=>[...a[3]||(a[3]=[(0,e.Lk)("i",{class:"bi bi-folder me-1"},null,-1),(0,e.eW)(" 我的旅行 ",-1)])]),_:1})])):(0,e.Q3)("",!0)]),(0,e.Lk)("div",v,[b.isLoggedIn?((0,e.uX)(),(0,e.CE)("div",k,[(0,e.Lk)("a",p,[(0,e.Lk)("img",{src:b.avatar,alt:"avatar",width:"32",height:"32",class:"rounded-circle me-2"},null,8,g),(0,e.Lk)("span",null,(0,n.v_)(b.username),1)]),(0,e.Lk)("ul",L,[(0,e.Lk)("li",null,[(0,e.bF)(w,{to:"/user/center",class:"dropdown-item"},{default:(0,e.k6)(()=>[...a[4]||(a[4]=[(0,e.Lk)("i",{class:"bi bi-person me-2"},null,-1),(0,e.eW)("个人中心 ",-1)])]),_:1})]),a[6]||(a[6]=(0,e.Lk)("li",null,[(0,e.Lk)("hr",{class:"dropdown-divider"})],-1)),(0,e.Lk)("li",null,[(0,e.Lk)("a",{href:"#",class:"dropdown-item",onClick:a[0]||(a[0]=(0,i.D$)((...s)=>b.handleLogout&&b.handleLogout(...s),["prevent"]))},[...a[5]||(a[5]=[(0,e.Lk)("i",{class:"bi bi-box-arrow-right me-2"},null,-1),(0,e.eW)("退出登录 ",-1)])])])])])):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.bF)(w,{to:"/login",class:"btn btn-outline-light btn-sm me-2"},{default:(0,e.k6)(()=>[...a[7]||(a[7]=[(0,e.eW)(" 登录 ",-1)])]),_:1}),(0,e.bF)(w,{to:"/register",class:"btn btn-light btn-sm"},{default:(0,e.k6)(()=>[...a[8]||(a[8]=[(0,e.eW)(" 注册 ",-1)])]),_:1})],64))])])])])}t(4114);var m=t(8512),f=t(1516),w={name:"NavBar",setup(){const s=(0,m.rd)(),a=(0,f.k)(),t=(0,e.EW)(()=>a.isLoggedIn),n=(0,e.EW)(()=>a.username),i=(0,e.EW)(()=>a.avatar),l=async()=>{if(confirm("确定要退出登录吗？"))try{await a.logout(),s.push("/login")}catch(t){console.error("退出失败:",t)}};return{isLoggedIn:t,username:n,avatar:i,handleLogout:l}}},_=t(1241);const h=(0,_.A)(w,[["render",b],["__scopeId","data-v-7d3c81b6"]]);var y=h}}]);
//# sourceMappingURL=487.41e81b89.js.map