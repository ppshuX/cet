{"version":3,"file":"assets/js/492.72063008.js","mappings":"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","sources":["webpack://roamio-web/./src/views/MyTripsView.vue","webpack://roamio-web/./src/views/MyTripsView.vue?51ac","webpack://roamio-web/./src/components/NavBar.vue","webpack://roamio-web/./src/components/NavBar.vue?01fd","webpack://roamio-web/./src/api/tripPlan.js"],"sourcesContent":["<template>\r\n  <div class=\"my-trips-wrapper\">\r\n    <NavBar />\r\n    \r\n    <div class=\"container py-5\">\r\n      <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <h2>我的旅行计划</h2>\r\n        <button class=\"btn btn-primary\" @click=\"createNew\">\r\n          <i class=\"bi bi-plus-circle me-2\"></i>创建新旅行\r\n        </button>\r\n      </div>\r\n      \r\n      <!-- Loading状态 -->\r\n      <div v-if=\"loading\" class=\"text-center py-5\">\r\n        <div class=\"spinner-border text-primary\" role=\"status\">\r\n          <span class=\"visually-hidden\">加载中...</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 旅行列表 -->\r\n      <div v-else-if=\"trips.length > 0\" class=\"row\">\r\n        <div v-for=\"trip in trips\" :key=\"trip.id\" class=\"col-md-6 col-lg-4 mb-4\">\r\n          <div class=\"trip-card\">\r\n            <div class=\"trip-header\" :style=\"{ background: trip.theme_color || '#f0e68c' }\">\r\n              <div class=\"trip-icon\">{{ trip.icon }}</div>\r\n              <div class=\"trip-meta\">\r\n                <span class=\"badge\" :class=\"trip.status === 'published' ? 'bg-success' : 'bg-secondary'\">\r\n                  {{ trip.status === 'published' ? '已发布' : '草稿' }}\r\n                </span>\r\n                <span class=\"badge ms-2\" :class=\"trip.visibility === 'public' ? 'bg-info' : 'bg-warning'\">\r\n                  {{ trip.visibility === 'public' ? '公开' : '私有' }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"trip-body\">\r\n              <h5 class=\"trip-title\">{{ trip.title }}</h5>\r\n              <p class=\"trip-desc text-muted\">{{ trip.description || '暂无描述' }}</p>\r\n              <div class=\"trip-info\">\r\n                <small class=\"text-muted\">\r\n                  <i class=\"bi bi-calendar me-1\"></i>{{ trip.days_count || 0 }}天\r\n                </small>\r\n                <small class=\"text-muted ms-3\">\r\n                  <i class=\"bi bi-clock me-1\"></i>{{ formatDate(trip.updated_at) }}\r\n                </small>\r\n              </div>\r\n            </div>\r\n            <div class=\"trip-actions\">\r\n              <button class=\"btn btn-sm btn-outline-primary\" @click=\"editTrip(trip.slug)\">\r\n                <i class=\"bi bi-pencil me-1\"></i>编辑\r\n              </button>\r\n              <button class=\"btn btn-sm btn-outline-secondary\" @click=\"viewTrip(trip.slug)\">\r\n                <i class=\"bi bi-eye me-1\"></i>预览\r\n              </button>\r\n              <button class=\"btn btn-sm btn-success\" @click=\"addToTree(trip.slug)\">\r\n                <i class=\"bi bi-tree me-1\"></i>运用到旅行树\r\n              </button>\r\n              <button class=\"btn btn-sm btn-outline-danger\" @click=\"deleteTrip(trip.slug)\">\r\n                <i class=\"bi bi-trash\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 空状态 -->\r\n      <div v-else class=\"empty-state text-center py-5\">\r\n        <div class=\"empty-icon mb-3\">📝</div>\r\n        <h4>还没有旅行计划</h4>\r\n        <p class=\"text-muted mb-4\">开始创建你的第一个旅行计划吧！</p>\r\n        <button class=\"btn btn-primary btn-lg\" @click=\"createNew\">\r\n          <i class=\"bi bi-plus-circle me-2\"></i>创建新旅行\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useUserStore } from '@/stores'\r\nimport { getMyTrips, deleteTripPlan, addTripToTree } from '@/api/tripPlan'\r\nimport NavBar from '@/components/NavBar.vue'\r\n\r\nexport default {\r\n  name: 'MyTripsView',\r\n  \r\n  components: {\r\n    NavBar\r\n  },\r\n  \r\n  setup() {\r\n    const router = useRouter()\r\n    const userStore = useUserStore()\r\n    \r\n    const trips = ref([])\r\n    const loading = ref(true)\r\n    \r\n    const fetchMyTrips = async () => {\r\n      loading.value = true\r\n      try {\r\n        const data = await getMyTrips()\r\n        trips.value = data.results || data || []\r\n      } catch (error) {\r\n        console.error('获取旅行列表失败:', error)\r\n        alert('加载失败')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n    \r\n    const createNew = () => {\r\n      router.push('/editor/new')\r\n    }\r\n    \r\n    const editTrip = (slug) => {\r\n      router.push(`/editor/${slug}`)\r\n    }\r\n    \r\n    const viewTrip = (slug) => {\r\n      router.push(`/trip/${slug}/`)\r\n    }\r\n    \r\n    const deleteTrip = async (slug) => {\r\n      if (!confirm('确定要删除这个旅行计划吗？此操作无法撤销。')) {\r\n        return\r\n      }\r\n      \r\n      try {\r\n        await deleteTripPlan(slug)\r\n        alert('删除成功')\r\n        await fetchMyTrips()\r\n      } catch (error) {\r\n        console.error('删除失败:', error)\r\n        alert('删除失败')\r\n      }\r\n    }\r\n    \r\n    const addToTree = async (slug) => {\r\n      if (!confirm('确定要将此旅行计划添加到旅行树吗？它将显示在首页的旅行树上。')) {\r\n        return\r\n      }\r\n      \r\n      try {\r\n        const result = await addTripToTree(slug)\r\n        alert(result.detail || '成功添加到旅行树！')\r\n      } catch (error) {\r\n        console.error('添加到旅行树失败:', error)\r\n        alert('添加到旅行树失败，请稍后重试')\r\n      }\r\n    }\r\n    \r\n    const formatDate = (dateStr) => {\r\n      if (!dateStr) return '暂无'\r\n      const date = new Date(dateStr)\r\n      return date.toLocaleDateString('zh-CN')\r\n    }\r\n    \r\n    onMounted(() => {\r\n      if (!userStore.isLoggedIn) {\r\n        alert('请先登录')\r\n        router.push('/login')\r\n        return\r\n      }\r\n      fetchMyTrips()\r\n    })\r\n    \r\n    return {\r\n      trips,\r\n      loading,\r\n      createNew,\r\n      editTrip,\r\n      viewTrip,\r\n      deleteTrip,\r\n      addToTree,\r\n      formatDate\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.my-trips-wrapper {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #e8f4fd 0%, #d1ecf1 100%);\r\n}\r\n\r\n.trip-card {\r\n  background: white;\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.trip-card:hover {\r\n  transform: translateY(-4px);\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);\r\n}\r\n\r\n.trip-header {\r\n  padding: 1.5rem;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.trip-icon {\r\n  font-size: 2.5rem;\r\n}\r\n\r\n.trip-body {\r\n  padding: 1.5rem;\r\n}\r\n\r\n.trip-title {\r\n  color: #2c3e50;\r\n  font-weight: 600;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.trip-desc {\r\n  font-size: 0.9rem;\r\n  margin-bottom: 1rem;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n}\r\n\r\n.trip-info {\r\n  border-top: 1px solid #e0e0e0;\r\n  padding-top: 0.75rem;\r\n}\r\n\r\n.trip-actions {\r\n  padding: 1rem 1.5rem;\r\n  background: #f8f9fa;\r\n  border-top: 1px solid #e0e0e0;\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  justify-content: space-between;\r\n}\r\n\r\n/* 空状态 */\r\n.empty-state {\r\n  background: white;\r\n  border-radius: 16px;\r\n  padding: 4rem 2rem;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 4rem;\r\n  opacity: 0.5;\r\n}\r\n\r\n/* 响应式 */\r\n@media (max-width: 768px) {\r\n  .trip-actions {\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .trip-actions .btn {\r\n    flex: 1;\r\n    min-width: 80px;\r\n  }\r\n}\r\n</style>\r\n\r\n","import { render } from \"./MyTripsView.vue?vue&type=template&id=229e601c&scoped=true\"\nimport script from \"./MyTripsView.vue?vue&type=script&lang=js\"\nexport * from \"./MyTripsView.vue?vue&type=script&lang=js\"\n\nimport \"./MyTripsView.vue?vue&type=style&index=0&id=229e601c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-229e601c\"]])\n\nexport default __exports__","<template>\r\n  <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary shadow-sm sticky-top\">\r\n    <div class=\"container-fluid\">\r\n      <!-- Logo -->\r\n      <router-link to=\"/\" class=\"navbar-brand\">\r\n        <span class=\"brand-text\">Roamio</span>\r\n      </router-link>\r\n      \r\n      <!-- Toggle按钮（移动端） -->\r\n      <button\r\n        class=\"navbar-toggler\"\r\n        type=\"button\"\r\n        data-bs-toggle=\"collapse\"\r\n        data-bs-target=\"#navbarNav\"\r\n      >\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      \r\n    <!-- 导航项 -->\r\n    <div class=\"collapse navbar-collapse\" id=\"navbarNav\" style=\"overflow: visible;\">\r\n        <ul class=\"navbar-nav me-auto\">\r\n          <li class=\"nav-item\">\r\n            <router-link to=\"/\" class=\"nav-link\">\r\n              <i class=\"bi bi-house-door me-1\"></i>\r\n              旅行列表\r\n            </router-link>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <router-link to=\"/my-trips\" class=\"nav-link\">\r\n              <i class=\"bi bi-folder me-1\"></i>\r\n              我的旅行\r\n            </router-link>\r\n          </li>\r\n        </ul>\r\n        \r\n        <!-- 右侧用户信息 -->\r\n        <div class=\"d-flex align-items-center\">\r\n          <!-- 已登录 -->\r\n          <template v-if=\"isLoggedIn\">\r\n            <div class=\"dropdown dropdown-end\">\r\n              <a\r\n                href=\"#\"\r\n                class=\"d-flex align-items-center text-white text-decoration-none dropdown-toggle user-dropdown-btn\"\r\n                id=\"dropdownUser\"\r\n                data-bs-toggle=\"dropdown\"\r\n                aria-expanded=\"false\"\r\n              >\r\n                <img\r\n                  :src=\"avatar\"\r\n                  alt=\"avatar\"\r\n                  width=\"32\"\r\n                  height=\"32\"\r\n                  class=\"rounded-circle me-2\"\r\n                />\r\n                <span>{{ username }}</span>\r\n              </a>\r\n              <ul class=\"dropdown-menu dropdown-menu-end text-small\" aria-labelledby=\"dropdownUser\">\r\n                <li>\r\n                  <router-link to=\"/user/center\" class=\"dropdown-item\">\r\n                    <i class=\"bi bi-person me-2\"></i>个人中心\r\n                  </router-link>\r\n                </li>\r\n                <li><hr class=\"dropdown-divider\" /></li>\r\n                <li>\r\n                  <a href=\"#\" class=\"dropdown-item\" @click.prevent=\"handleLogout\">\r\n                    <i class=\"bi bi-box-arrow-right me-2\"></i>退出登录\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </template>\r\n          \r\n          <!-- 未登录 -->\r\n          <template v-else>\r\n            <router-link to=\"/login\" class=\"btn btn-outline-light btn-sm me-2\">\r\n              登录\r\n            </router-link>\r\n            <router-link to=\"/register\" class=\"btn btn-light btn-sm\">\r\n              注册\r\n            </router-link>\r\n          </template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useUserStore } from '@/stores'\r\n\r\nexport default {\r\n  name: 'NavBar',\r\n  \r\n  setup() {\r\n    const router = useRouter()\r\n    const userStore = useUserStore()\r\n    \r\n    const isLoggedIn = computed(() => userStore.isLoggedIn)\r\n    const username = computed(() => userStore.username)\r\n    const avatar = computed(() => userStore.avatar)\r\n    \r\n    const handleLogout = async () => {\r\n      if (!confirm('确定要退出登录吗？')) return\r\n      \r\n      try {\r\n        await userStore.logout()\r\n        router.push('/login')\r\n      } catch (error) {\r\n        console.error('退出失败:', error)\r\n      }\r\n    }\r\n    \r\n    return {\r\n      isLoggedIn,\r\n      username,\r\n      avatar,\r\n      handleLogout\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.navbar {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\r\n  border-bottom: none;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  padding: 1rem 0;\r\n}\r\n\r\n.navbar-brand {\r\n  font-size: 1.5rem;\r\n  font-weight: 800;\r\n  color: white !important;\r\n  text-decoration: none;\r\n  transition: all 0.3s ease;\r\n  letter-spacing: 2px;\r\n}\r\n\r\n.brand-text {\r\n  background: linear-gradient(45deg, #fff 0%, #f0f0f0 50%, #fff 100%);\r\n  background-size: 200% auto;\r\n  background-clip: text;\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  font-weight: 900;\r\n  font-size: 1.6rem;\r\n  letter-spacing: 3px;\r\n  text-shadow: 0 3px 8px rgba(255, 255, 255, 0.3);\r\n  animation: shimmer 3s infinite;\r\n}\r\n\r\n@keyframes shimmer {\r\n  0%, 100% {\r\n    background-position: 0% center;\r\n  }\r\n  50% {\r\n    background-position: 100% center;\r\n  }\r\n}\r\n\r\n.navbar-brand:hover .brand-text {\r\n  background-position: 100% center;\r\n  transform: scale(1.08);\r\n  filter: brightness(1.2);\r\n}\r\n\r\n.nav-link {\r\n  color: rgba(255, 255, 255, 0.95) !important;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n  border-radius: 8px;\r\n  padding: 0.5rem 1rem !important;\r\n}\r\n\r\n.nav-link:hover {\r\n  color: white !important;\r\n  background: rgba(255, 255, 255, 0.15);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.dropdown-menu {\r\n  min-width: 200px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\r\n  border: none;\r\n  margin-top: 0.5rem;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.dropdown-item {\r\n  padding: 0.75rem 1.25rem;\r\n  transition: all 0.2s ease;\r\n  border-radius: 8px;\r\n  margin: 0.2rem;\r\n}\r\n\r\n.dropdown-item:hover {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  transform: translateX(3px);\r\n}\r\n\r\n.dropdown {\r\n  position: relative;\r\n  z-index: 1050;\r\n}\r\n\r\n.user-dropdown-btn {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 25px;\r\n  padding: 0.5rem 1rem;\r\n  transition: all 0.3s ease;\r\n  white-space: nowrap;\r\n  max-width: 100%;\r\n  cursor: pointer;\r\n}\r\n\r\n.user-dropdown-btn:hover {\r\n  background: rgba(255, 255, 255, 0.3);\r\n  transform: scale(1.05);\r\n}\r\n\r\n.user-dropdown-btn[aria-expanded=\"true\"] {\r\n  background: rgba(255, 255, 255, 0.35);\r\n}\r\n\r\n.btn-outline-light {\r\n  border: 2px solid rgba(255, 255, 255, 0.8);\r\n  color: white;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn-outline-light:hover {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: white;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.btn-light {\r\n  background: white;\r\n  color: #667eea;\r\n  font-weight: 600;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn-light:hover {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  color: #764ba2;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n/* 移动端优化 */\r\n@media (max-width: 991px) {\r\n  .navbar {\r\n    padding: 0.75rem 0;\r\n  }\r\n  \r\n  .navbar-brand {\r\n    font-size: 1.3rem;\r\n  }\r\n  \r\n  .brand-text {\r\n    font-size: 1.35rem;\r\n    letter-spacing: 2px;\r\n  }\r\n  \r\n  .navbar-nav .nav-link {\r\n    padding: 0.75rem 1rem;\r\n  }\r\n  \r\n  .dropdown-menu {\r\n    min-width: 180px;\r\n    max-width: calc(100vw - 30px);\r\n    position: absolute !important;\r\n    right: 0;\r\n    left: auto;\r\n    margin-top: 0.5rem;\r\n  }\r\n  \r\n  .user-dropdown-btn {\r\n    font-size: 0.9rem;\r\n    z-index: 1051;\r\n  }\r\n  \r\n  /* 确保下拉菜单不会被导航栏遮挡 */\r\n  .dropdown.show {\r\n    overflow: visible;\r\n  }\r\n  \r\n  /* 移动端确保下拉菜单在最上层 */\r\n  .dropdown {\r\n    z-index: 1050;\r\n  }\r\n  \r\n  .navbar-collapse {\r\n    z-index: 1049;\r\n  }\r\n}\r\n</style>\r\n\r\n","import { render } from \"./NavBar.vue?vue&type=template&id=8cff0656&scoped=true\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=8cff0656&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8cff0656\"]])\n\nexport default __exports__","/**\r\n * 旅行计划API\r\n * 用于编辑器的CRUD操作\r\n */\r\nimport request from './request'\r\n\r\n/**\r\n * 获取我的旅行列表\r\n */\r\nexport const getMyTrips = (params) => {\r\n    return request.get('/trip-plans/my_trips/', { params })\r\n}\r\n\r\n/**\r\n * 获取旅行计划详情\r\n * @param {string} slug - 旅行标识符\r\n */\r\nexport const getTripPlan = (slug) => {\r\n    return request.get(`/trip-plans/${slug}/`)\r\n}\r\n\r\n/**\r\n * 创建旅行计划\r\n * @param {object} data - 旅行数据\r\n */\r\nexport const createTripPlan = (data) => {\r\n    return request.post('/trip-plans/', data)\r\n}\r\n\r\n/**\r\n * 更新旅行计划\r\n * @param {string} slug - 旅行标识符\r\n * @param {object} data - 更新的数据\r\n */\r\nexport const updateTripPlan = (slug, data) => {\r\n    return request.patch(`/trip-plans/${slug}/`, data)\r\n}\r\n\r\n/**\r\n * 删除旅行计划\r\n * @param {string} slug - 旅行标识符\r\n */\r\nexport const deleteTripPlan = (slug) => {\r\n    return request.delete(`/trip-plans/${slug}/`)\r\n}\r\n\r\n/**\r\n * 复制旅行计划\r\n * @param {string} slug - 源旅行标识符\r\n */\r\nexport const cloneTripPlan = (slug) => {\r\n    return request.post(`/trip-plans/${slug}/clone/`)\r\n}\r\n\r\n/**\r\n * 发布旅行计划\r\n * @param {string} slug - 旅行标识符\r\n */\r\nexport const publishTripPlan = (slug) => {\r\n    return updateTripPlan(slug, { status: 'published' })\r\n}\r\n\r\n/**\r\n * 设置旅行为公开\r\n * @param {string} slug - 旅行标识符\r\n */\r\nexport const makePublic = (slug) => {\r\n    return updateTripPlan(slug, { visibility: 'public' })\r\n}\r\n\r\n/**\r\n * 设置旅行为私有\r\n * @param {string} slug - 旅行标识符\r\n */\r\nexport const makePrivate = (slug) => {\r\n    return updateTripPlan(slug, { visibility: 'private' })\r\n}\r\n\r\n/**\r\n * 将旅行计划添加到旅行树\r\n * @param {string} slug - 旅行标识符\r\n */\r\nexport const addTripToTree = (slug) => {\r\n    return request.post(`/trip-plans/${slug}/add_to_tree/`)\r\n}\r\n\r\n"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_NavBar","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","args","$setup","createNew","loading","_hoisted_4","role","trips","length","_hoisted_5","_Fragment","_renderList","trip","key","id","_hoisted_6","style","_normalizeStyle","background","theme_color","_hoisted_7","_toDisplayString","icon","_hoisted_8","_normalizeClass","status","visibility","_hoisted_9","_hoisted_10","title","_hoisted_11","description","_hoisted_12","_hoisted_13","days_count","_hoisted_14","formatDate","updated_at","_hoisted_15","$event","editTrip","slug","viewTrip","addToTree","deleteTrip","_hoisted_20","name","components","NavBar","setup","router","useRouter","userStore","useUserStore","ref","fetchMyTrips","async","value","data","getMyTrips","results","error","console","alert","push","confirm","deleteTripPlan","result","addTripToTree","detail","dateStr","date","Date","toLocaleDateString","onMounted","isLoggedIn","__exports__","render","href","_component_router_link","to","type","src","avatar","alt","width","height","username","_withModifiers","handleLogout","computed","logout","params","request","get","getTripPlan","createTripPlan","post","updateTripPlan","patch","delete"],"sourceRoot":""}