"use strict";(self["webpackChunkroamio_web"]=self["webpackChunkroamio_web"]||[]).push([[210],{7210:function(e,r,a){a.r(r),a.d(r,{default:function(){return x}});var s=a(6768),o=a(5130),l=a(4232);const n={class:"login-container"},t={class:"container"},d={class:"row justify-content-center"},i={class:"col-md-6 col-lg-4"},c={class:"card shadow-lg"},u={class:"card-body p-5"},m={class:"mb-3"},p={class:"mb-3"},v={key:0,class:"alert alert-danger",role:"alert"},f=["disabled"],b={key:0,class:"spinner-border spinner-border-sm me-2"},k={class:"text-center"};function L(e,r,a,L,w,y){const g=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",t,[(0,s.Lk)("div",d,[(0,s.Lk)("div",i,[(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[r[7]||(r[7]=(0,s.Lk)("h2",{class:"text-center mb-4"},"用户登录",-1)),(0,s.Lk)("form",{onSubmit:r[2]||(r[2]=(0,o.D$)((...e)=>L.handleLogin&&L.handleLogin(...e),["prevent"]))},[(0,s.Lk)("div",m,[r[3]||(r[3]=(0,s.Lk)("label",{for:"username",class:"form-label"},"用户名",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":r[0]||(r[0]=e=>L.form.username=e),required:"",placeholder:"请输入用户名"},null,512),[[o.Jo,L.form.username]])]),(0,s.Lk)("div",p,[r[4]||(r[4]=(0,s.Lk)("label",{for:"password",class:"form-label"},"密码",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":r[1]||(r[1]=e=>L.form.password=e),required:"",placeholder:"请输入密码"},null,512),[[o.Jo,L.form.password]])]),L.error?((0,s.uX)(),(0,s.CE)("div",v,(0,l.v_)(L.error),1)):(0,s.Q3)("",!0),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary w-100 mb-3",disabled:L.loading},[L.loading?((0,s.uX)(),(0,s.CE)("span",b)):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,l.v_)(L.loading?"登录中...":"登录"),1)],8,f),(0,s.Lk)("div",k,[r[6]||(r[6]=(0,s.Lk)("span",{class:"text-muted"},"还没有账号？",-1)),(0,s.bF)(g,{to:"/register",class:"text-decoration-none"},{default:(0,s.k6)(()=>[...r[5]||(r[5]=[(0,s.eW)("立即注册",-1)])]),_:1})])],32)])])])])])])}a(4114);var w=a(144),y=a(8512),g=a(1516),_={name:"LoginView",setup(){const e=(0,y.rd)(),r=(0,g.k)(),a=(0,w.KR)({username:"",password:""}),s=(0,w.KR)(!1),o=(0,w.KR)(""),l=async()=>{s.value=!0,o.value="";try{await r.login(a.value),e.push("/")}catch(l){if(l.response?.data){const e=l.response.data;e.username&&Array.isArray(e.username)?o.value=e.username[0]:e.password&&Array.isArray(e.password)?o.value=e.password[0]:e.non_field_errors&&Array.isArray(e.non_field_errors)?o.value=e.non_field_errors[0]:"string"===typeof e?o.value=e:e.detail?o.value=e.detail:o.value="登录失败，请检查用户名和密码"}else o.value=l.message||"登录失败，请检查用户名和密码"}finally{s.value=!1}};return{form:a,loading:s,error:o,handleLogin:l}}},h=a(1241);const A=(0,h.A)(_,[["render",L],["__scopeId","data-v-1a559c6c"]]);var x=A}}]);
//# sourceMappingURL=210.fb4753cc.js.map