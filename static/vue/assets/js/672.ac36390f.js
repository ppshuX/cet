"use strict";(self["webpackChunkroamio_web"]=self["webpackChunkroamio_web"]||[]).push([[672],{432:function(e,t,a){a.d(t,{A:function(){return w}});var n=a(6768),i=a(4232),l=a(5130);const s={class:"navbar navbar-expand-lg navbar-dark bg-primary shadow-sm sticky-top"},o={class:"container-fluid"},r={class:"collapse navbar-collapse",id:"navbarNav",style:{overflow:"visible"}},c={class:"navbar-nav me-auto"},d={class:"nav-item"},u={key:0,class:"nav-item"},m={class:"d-flex align-items-center"},p={key:0,class:"dropdown dropdown-end"},v={href:"#",class:"d-flex align-items-center text-white text-decoration-none dropdown-toggle user-dropdown-btn",id:"dropdownUser","data-bs-toggle":"dropdown","aria-expanded":"false"},g=["src"],b={class:"dropdown-menu dropdown-menu-end text-small","aria-labelledby":"dropdownUser"};function k(e,t,a,k,y,f){const h=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("nav",s,[(0,n.Lk)("div",o,[(0,n.bF)(h,{to:"/",class:"navbar-brand"},{default:(0,n.k6)(()=>[...t[1]||(t[1]=[(0,n.Lk)("span",{class:"brand-text"},"Roamio",-1)])]),_:1}),t[9]||(t[9]=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,n.Lk)("div",r,[(0,n.Lk)("ul",c,[(0,n.Lk)("li",d,[(0,n.bF)(h,{to:"/",class:"nav-link"},{default:(0,n.k6)(()=>[...t[2]||(t[2]=[(0,n.Lk)("i",{class:"bi bi-house-door me-1"},null,-1),(0,n.eW)(" æ—…è¡Œå¤§åŽ… ",-1)])]),_:1})]),k.isLoggedIn?((0,n.uX)(),(0,n.CE)("li",u,[(0,n.bF)(h,{to:"/my-trips/",class:"nav-link"},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.Lk)("i",{class:"bi bi-folder me-1"},null,-1),(0,n.eW)(" æˆ‘çš„æ—…è¡Œ ",-1)])]),_:1})])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",m,[k.isLoggedIn?((0,n.uX)(),(0,n.CE)("div",p,[(0,n.Lk)("a",v,[(0,n.Lk)("img",{src:k.avatar,alt:"avatar",width:"32",height:"32",class:"rounded-circle me-2"},null,8,g),(0,n.Lk)("span",null,(0,i.v_)(k.username),1)]),(0,n.Lk)("ul",b,[(0,n.Lk)("li",null,[(0,n.bF)(h,{to:"/user/center",class:"dropdown-item"},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.Lk)("i",{class:"bi bi-person me-2"},null,-1),(0,n.eW)("ä¸ªäººä¸­å¿ƒ ",-1)])]),_:1})]),t[6]||(t[6]=(0,n.Lk)("li",null,[(0,n.Lk)("hr",{class:"dropdown-divider"})],-1)),(0,n.Lk)("li",null,[(0,n.Lk)("a",{href:"#",class:"dropdown-item",onClick:t[0]||(t[0]=(0,l.D$)((...e)=>k.handleLogout&&k.handleLogout(...e),["prevent"]))},[...t[5]||(t[5]=[(0,n.Lk)("i",{class:"bi bi-box-arrow-right me-2"},null,-1),(0,n.eW)("é€€å‡ºç™»å½• ",-1)])])])])])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.bF)(h,{to:"/login",class:"btn btn-outline-light btn-sm me-2"},{default:(0,n.k6)(()=>[...t[7]||(t[7]=[(0,n.eW)(" ç™»å½• ",-1)])]),_:1}),(0,n.bF)(h,{to:"/register",class:"btn btn-light btn-sm"},{default:(0,n.k6)(()=>[...t[8]||(t[8]=[(0,n.eW)(" æ³¨å†Œ ",-1)])]),_:1})],64))])])])])}a(4114);var y=a(8512),f=a(3459),h={name:"NavBar",setup(){const e=(0,y.rd)(),t=(0,f.k)(),a=(0,n.EW)(()=>t.isLoggedIn),i=(0,n.EW)(()=>t.username),l=(0,n.EW)(()=>t.avatar),s=async()=>{if(confirm("ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ"))try{await t.logout(),e.push("/login")}catch(a){console.error("é€€å‡ºå¤±è´¥:",a)}};return{isLoggedIn:a,username:i,avatar:l,handleLogout:s}}},C=a(1241);const L=(0,C.A)(h,[["render",k],["__scopeId","data-v-a6dd4bee"]]);var w=L},485:function(e,t,a){a.d(t,{B:function(){return l},Yf:function(){return i},aD:function(){return c},c7:function(){return d},lr:function(){return o},mb:function(){return r},nN:function(){return s}});var n=a(7277);const i=e=>n.A.get("/trips/",{params:e}),l=async e=>{try{return await n.A.get(`/trip-plans/${e}/`)}catch(t){const a=t.response?.status||t.status,i=404===a||"ERR_BAD_REQUEST"===t.code||t.message?.includes("404")||!t.response;if(i)return await n.A.get(`/trips/${e}/`);throw t}},s=e=>n.A.post(`/trips/${e}/like/`),o=e=>n.A.get(`/trips/${e}/stats/`),r=e=>n.A.get(`/trip-plans/${e}/stats/`),c=e=>n.A.post(`/trip-plans/${e}/like/`),d=e=>n.A.post(`/trip-plans/${e}/view/`)},5672:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ot}});var n=a(6768),i=a(4232);const l=["title"],s=["src"],o={class:"container py-5"},r={key:0,class:"text-center"},c={key:1},d={class:"card shadow-lg mb-4"},u={class:"card-body p-5"},m={class:"mb-3"},p={class:"text-muted mb-0"},v={key:0,class:"basic-info-section"},g={class:"info-grid"},b={key:0,class:"info-item"},k={class:"info-value"},y={key:1,class:"info-item"},f={class:"info-value"},h={key:2,class:"info-item"},C={class:"info-value"},L={key:3,class:"info-item"},w={class:"info-value"},_={key:4,class:"info-item"},E={class:"info-value"},I={key:5,class:"info-item"},R={class:"info-value"},X={key:6,class:"info-item"},S={class:"info-value"},A={key:7,class:"info-item"},x={class:"info-value"},D={class:"highlights-list"},Q={class:"itinerary-section"},F={class:"itinerary-header"},M={class:"itinerary-day"},$={key:0,class:"itinerary-time"},K={class:"itinerary-content"},W={key:0,class:"itinerary-highlight"},T={key:1},B={class:"total-row"},U={key:2,class:"tips-section"},V={class:"tips-list"};function N(e,t,a,N,P,q){const G=(0,n.g2)("NavBar"),J=(0,n.g2)("TripProgress"),j=(0,n.g2)("TripOverview"),O=(0,n.g2)("TripStats"),Y=(0,n.g2)("CommentSection");return(0,n.uX)(),(0,n.CE)("div",{class:"trip-detail-container",style:(0,i.Tr)({background:N.trip&&N.trip.theme_color||"#f0e68c"})},[(0,n.bF)(G),(0,n.Lk)("button",{class:"back-btn",onClick:t[0]||(t[0]=(...e)=>N.goBack&&N.goBack(...e)),title:"è¿”å›žé¦–é¡µ"}," ðŸ  "),(0,n.Lk)("button",{class:"scroll-btn",onClick:t[1]||(t[1]=(...e)=>N.scrollToComments&&N.scrollToComments(...e)),title:"è·³åˆ°è¯„è®ºåŒº"}," â¬‡ï¸ "),(0,n.Lk)("button",{class:"music-btn",onClick:t[2]||(t[2]=(...e)=>N.toggleMusic&&N.toggleMusic(...e)),title:N.isPlaying?"æš‚åœéŸ³ä¹":"æ’­æ”¾éŸ³ä¹"},(0,i.v_)(N.isPlaying?"ðŸ”Š":"ðŸ”‡"),9,l),(0,n.Lk)("audio",{ref:"audioPlayer",src:N.musicSrc||"",preload:"auto",loop:""},null,8,s),(0,n.Lk)("div",o,[N.loading?((0,n.uX)(),(0,n.CE)("div",r,[...t[3]||(t[3]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"åŠ è½½ä¸­...")],-1)])])):N.trip?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",d,[(0,n.Lk)("div",u,[(0,n.Lk)("h1",m,(0,i.v_)(N.trip.name||N.trip.title),1),(0,n.Lk)("p",p,(0,i.v_)(N.trip.description),1)])]),N.tripConfig&&N.tripConfig.dates||N.trip.start_date&&N.trip.end_date?((0,n.uX)(),(0,n.Wv)(J,{key:0,"start-date":N.tripConfig?.dates?.start||N.trip.start_date,"end-date":N.tripConfig?.dates?.end||N.trip.end_date},null,8,["start-date","end-date"])):(0,n.Q3)("",!0),N.tripConfig&&N.tripConfig.overview?((0,n.uX)(),(0,n.Wv)(j,{key:1,title:"è¡Œç¨‹æ¦‚è§ˆ"},{default:(0,n.k6)(()=>[N.tripConfig.overview.basicInfo?((0,n.uX)(),(0,n.CE)("div",v,[t[12]||(t[12]=(0,n.Lk)("h4",null,"ðŸ§­ åŸºæœ¬ä¿¡æ¯",-1)),(0,n.Lk)("div",g,[N.tripConfig.overview.basicInfo.participants?((0,n.uX)(),(0,n.CE)("div",b,[t[4]||(t[4]=(0,n.Lk)("span",{class:"info-label"},"ðŸ‘¥ Roamioerï¼š",-1)),(0,n.Lk)("span",k,(0,i.v_)(N.tripConfig.overview.basicInfo.participants),1)])):(0,n.Q3)("",!0),N.tripConfig.overview.basicInfo.departure?((0,n.uX)(),(0,n.CE)("div",y,[t[5]||(t[5]=(0,n.Lk)("span",{class:"info-label"},"ðŸš© å‡ºå‘åœ°ï¼š",-1)),(0,n.Lk)("span",f,(0,i.v_)(N.tripConfig.overview.basicInfo.departure),1)])):(0,n.Q3)("",!0),N.tripConfig.overview.basicInfo.destination?((0,n.uX)(),(0,n.CE)("div",h,[t[6]||(t[6]=(0,n.Lk)("span",{class:"info-label"},"ðŸŽ¯ ç›®çš„åœ°ï¼š",-1)),(0,n.Lk)("span",C,(0,i.v_)(N.tripConfig.overview.basicInfo.destination),1)])):(0,n.Q3)("",!0),N.tripConfig.overview.basicInfo.transport?((0,n.uX)(),(0,n.CE)("div",L,[t[7]||(t[7]=(0,n.Lk)("span",{class:"info-label"},"ðŸš— äº¤é€šæ–¹å¼ï¼š",-1)),(0,n.Lk)("span",w,(0,i.v_)(N.tripConfig.overview.basicInfo.transport),1)])):(0,n.Q3)("",!0),N.tripConfig.overview.basicInfo.accommodation?((0,n.uX)(),(0,n.CE)("div",_,[t[8]||(t[8]=(0,n.Lk)("span",{class:"info-label"},"ðŸ¨ ä½å®¿ï¼š",-1)),(0,n.Lk)("span",E,(0,i.v_)(N.tripConfig.overview.basicInfo.accommodation),1)])):(0,n.Q3)("",!0),N.tripConfig.overview.basicInfo.duration?((0,n.uX)(),(0,n.CE)("div",I,[t[9]||(t[9]=(0,n.Lk)("span",{class:"info-label"},"â±ï¸ è¡Œç¨‹æ—¶é•¿ï¼š",-1)),(0,n.Lk)("span",R,(0,i.v_)(N.tripConfig.overview.basicInfo.duration),1)])):(0,n.Q3)("",!0),N.tripConfig.overview.basicInfo.budget?((0,n.uX)(),(0,n.CE)("div",X,[t[10]||(t[10]=(0,n.Lk)("span",{class:"info-label"},"ðŸ’° é¢„ç®—ï¼š",-1)),(0,n.Lk)("span",S,(0,i.v_)(N.tripConfig.overview.basicInfo.budget),1)])):(0,n.Q3)("",!0),N.tripConfig.overview.basicInfo.theme?((0,n.uX)(),(0,n.CE)("div",A,[t[11]||(t[11]=(0,n.Lk)("span",{class:"info-label"},"ðŸŽ¨ ä¸»é¢˜ï¼š",-1)),(0,n.Lk)("span",x,(0,i.v_)(N.tripConfig.overview.basicInfo.theme),1)])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0),t[18]||(t[18]=(0,n.Lk)("h4",null,"ðŸ“ è¡Œç¨‹äº®ç‚¹",-1)),(0,n.Lk)("ul",D,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(N.tripConfig.overview.highlights,(e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,i.v_)(e),1))),128))]),t[19]||(t[19]=(0,n.Lk)("h4",null,"ðŸ—“ï¸ è¯¦ç»†è¡Œç¨‹",-1)),(0,n.Lk)("div",Q,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(N.tripConfig.overview.itinerary,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"itinerary-item"},[(0,n.Lk)("div",F,[(0,n.Lk)("strong",M,(0,i.v_)(e.day),1),e.time?((0,n.uX)(),(0,n.CE)("span",$,"â° "+(0,i.v_)(e.time),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",K,(0,i.v_)(e.content),1),e.highlight?((0,n.uX)(),(0,n.CE)("div",W,(0,i.v_)(e.highlight),1)):(0,n.Q3)("",!0)]))),128))]),N.tripConfig.overview.budget&&N.tripConfig.overview.budget.items?((0,n.uX)(),(0,n.CE)("div",T,[t[16]||(t[16]=(0,n.Lk)("h4",null,"ðŸ’° é¢„ç®—å‚è€ƒ",-1)),(0,n.Lk)("table",null,[t[15]||(t[15]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"é¡¹ç›®"),(0,n.Lk)("th",null,"é‡‘é¢ï¼ˆå…ƒï¼‰"),(0,n.Lk)("th",null,"å¤‡æ³¨")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(N.tripConfig.overview.budget.items,(e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("td",null,(0,i.v_)(e.name),1),(0,n.Lk)("td",null,"Â¥"+(0,i.v_)(e.amount),1),(0,n.Lk)("td",null,(0,i.v_)(e.note),1)]))),128)),(0,n.Lk)("tr",B,[t[13]||(t[13]=(0,n.Lk)("td",null,[(0,n.Lk)("strong",null,"æ€»è®¡")],-1)),(0,n.Lk)("td",null,[(0,n.Lk)("strong",null,"Â¥"+(0,i.v_)(N.tripConfig.overview.budget.total),1)]),t[14]||(t[14]=(0,n.Lk)("td",null,"äººå‡é¢„ç®—",-1))])])])])):(0,n.Q3)("",!0),N.tripConfig.overview.tips&&N.tripConfig.overview.tips.length?((0,n.uX)(),(0,n.CE)("div",U,[t[17]||(t[17]=(0,n.Lk)("h4",null,"ðŸ’¡ å®žç”¨æç¤º",-1)),(0,n.Lk)("ul",V,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(N.tripConfig.overview.tips,(e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,i.v_)(e),1))),128))])])):(0,n.Q3)("",!0)]),_:1})):((0,n.uX)(),(0,n.Wv)(j,{key:2,title:"è¡Œç¨‹æ¦‚è§ˆ"},{default:(0,n.k6)(()=>[...t[20]||(t[20]=[(0,n.Lk)("p",{class:"text-muted text-center"},"è¡Œç¨‹å†…å®¹æ­£åœ¨ç­¹åˆ’ä¸­ï¼Œæ•¬è¯·æœŸå¾…...",-1)])]),_:1})),(0,n.bF)(O,{views:N.trip.stats?.views||0,likes:N.trip.stats?.likes||0,"can-like":!N.trip.overview||"public"===N.trip.visibility,onLike:N.handleLike},null,8,["views","likes","can-like","onLike"]),(0,n.bF)(Y,{ref:"commentSectionRef",comments:N.comments,"is-admin":N.isAdmin,"is-author":N.isAuthor,"get-avatar-url":N.getAvatarUrl,onSubmitComment:N.handleSubmitComment,onDeleteComment:N.handleDeleteComment,onAddImage:N.handleAddImage,onUpdateComment:N.handleUpdateComment,onSubmitReply:N.handleSubmitReply,onLoadReplies:N.handleLoadReplies},null,8,["comments","is-admin","is-author","get-avatar-url","onSubmitComment","onDeleteComment","onAddImage","onUpdateComment","onSubmitReply","onLoadReplies"])])):(0,n.Q3)("",!0)])],4)}a(4114),a(8111),a(2489),a(116),a(3579);var P=a(144),q=a(8512),G=a(3459),J=a(485),j=a(7277);const O=async e=>j.A.get("/comments/",{params:e}),Y=e=>j.A.post("/comments/",e,{headers:{"Content-Type":"multipart/form-data"}}),H=e=>j.A.delete(`/comments/${e}/`),z=(e,t)=>j.A.post(`/comments/${e}/add_image/`,t,{headers:{"Content-Type":"multipart/form-data"}}),Z=(e,t)=>j.A.patch(`/comments/${e}/`,t),ee=e=>j.A.get(`/comments/${e}/replies/`);var te=a(2674);const ae={trip:{title:"2025å¹´åŽ¦é—¨æ—…è¡Œè®¡åˆ’",backgroundColor:"#f0e68c",dates:{start:"2025-06-22",end:"2025-06-24"},icon:"ðŸ–ï¸",overview:{basicInfo:{departure:"å—æ˜Œ",destination:"åŽ¦é—¨",transport:"é«˜é“å¾€è¿”ï¼ˆ221å…ƒÃ—2ï¼‰",accommodation:"å—æž«äº‘å±…é…’åº—ï¼ˆè¿‘æ¤ç‰©å›­ï¼Œ2æ™šï¼‰"},highlights:["ðŸï¸ åŽ¦é—¨æ¤ç‰©å›­ - çƒ­å¸¦é›¨æž—å¥‡è§‚ï¼Œå‚æ™šå…‰çº¿æŸ”å’Œ","ðŸŒŠ é¼“æµªå±¿ - æ–‡è‰ºå²›å±¿ï¼Œæµ·ä¸ŠèŠ±å›­æ¼«æ­¥","ðŸ–ï¸ æ›¾åŽåžµ - æ–‡è‰ºå°åº—æŽ¢ç§˜ï¼Œä½“éªŒæµ·æ»¨æ…¢ç”Ÿæ´»","ðŸš´ çŽ¯å²›è·¯ - æµ·è¾¹éª‘è¡Œï¼Œæ¬£èµæ— æ•Œæµ·æ™¯","ðŸŒ… çœ‹æ—¥å‡ºæ—¥è½ - ç›¼å½’å¡”/ç™½åŸŽæ²™æ»©ï¼Œæ•æ‰æœ€ç¾Žæ—¶åˆ»"],itinerary:[{day:"ç¬¬ä¸€å¤©ï¼ˆ6æœˆ22æ—¥ï¼‰",time:"14:04æŠµè¾¾",content:"14:04æŠµè¾¾åŽ¦é—¨åŒ—ç«™ â†’ å…¥ä½é…’åº— â†’ 16:00-18:00åŽ¦é—¨æ¤ç‰©å›­ï¼ˆå­¦ç”Ÿç¥¨14.86å…ƒï¼‰â†’ æ²™å¡å°¾/æ›¾åŽåžµæ™šé¤ â†’ æµ·è¾¹æ•£æ­¥/é›†å¸‚",highlight:"ðŸŒ¿ æ¤ç‰©å›­çŽ¯å¢ƒä¼˜ç¾Žï¼Œé€‚åˆæ‹ç…§"},{day:"ç¬¬äºŒå¤©ï¼ˆ6æœˆ23æ—¥ï¼‰",time:"05:21æ—¥å‡º",content:"4:20èµ·åºŠçœ‹æ—¥å‡ºï¼ˆç›¼å½’å¡”/ç™½åŸŽæ²™æ»©ï¼‰â†’ 09:00-13:00é¼“æµªå±¿ â†’ 14:30-17:30å…«å¸‚+ä¸­å±±è·¯æ­¥è¡Œè¡— â†’ å‚æ™šæµ·è¾¹çœ‹æ—¥è½",highlight:"ðŸï¸ é¼“æµªå±¿æ–‡è‰ºå²›å±¿ï¼›ðŸ›ï¸ å…«å¸‚çƒŸç«æ°”æµ“åŽš"},{day:"ç¬¬ä¸‰å¤©ï¼ˆ6æœˆ24æ—¥ï¼‰",time:"15:54è¿”ç¨‹",content:"ä¸Šåˆé¸¿å±±å…¬å›­ â†’ å—æ™®é™€å¯ºå‚æ‹œ â†’ åˆé¤ â†’ 14:00å‰å¾€åŽ¦é—¨åŒ—ç«™ â†’ 15:54é«˜é“è¿”ç¨‹",highlight:"ðŸ¯ æ™®é™€å¯ºä½“éªŒä½›æ•™æ–‡åŒ–"}],budget:{items:[{name:"å¾€è¿”é«˜é“",amount:442,note:"å—æ˜Œ-åŽ¦é—¨ 221Ã—2"},{name:"æ™¯ç‚¹é—¨ç¥¨",amount:120,note:"å­¦ç”Ÿç¥¨"},{name:"åœ°é“+å¸‚å†…äº¤é€š",amount:100,note:"å«åœ°é“ã€çŸ­æ‰“è½¦"},{name:"ä½å®¿",amount:800,note:"å—æž«äº‘å±…2æ™š"},{name:"é¤é¥®",amount:600,note:"ç‰¹è‰²æµ·é²œ+å°åƒ"},{name:"å…¶ä»–æ¶ˆè´¹",amount:138,note:"é›¶é£Ÿã€çºªå¿µå“"}],total:2200},tips:["ðŸ“¸ æœ€ä½³æ‹ç…§æ—¶é—´ï¼šæ—©æ™šå…‰çº¿æŸ”å’Œ","ðŸŒ… æ—¥å‡ºæ—¶é—´05:21ï¼Œå»ºè®®4:20èµ·åºŠ","ðŸŽ« æå‰è´­ä¹°å­¦ç”Ÿç¥¨ï¼ŒèŠ‚çœè´¹ç”¨","ðŸ–ï¸ æå‰é¢„å®šé è¿‘æ¤ç‰©å›­çš„é…’åº—","ðŸœ å¿…å°ï¼šæ²™èŒ¶é¢ã€æµ·è›Žç…Žã€èŠ±ç”Ÿæ±¤"]}},trip1:{title:"2025å¹´7æœˆä¸‰å²”æ²³ä¸€æ—¥æ¸¸è®¡åˆ’",backgroundColor:"#f0e68c",dates:{start:"2025-07-15",end:"2025-07-15"},icon:"ðŸžï¸",overview:{basicInfo:{participants:"J.Grigg å’Œ Leo_Winston",departure:"é™†è‰¯",destination:"ä¸‰å²”æ²³é•‡",transport:"è‡ªé©¾/åŒ…è½¦",duration:"1å¤©"},highlights:["ðŸžï¸ é¾™æµ·å±±Â·é¾™å‡¤å¯º - å¾’æ­¥ç™»å±±ï¼Œä¿¯çž°å…¨æ™¯","ðŸ’§ ç™½æ°´å¡˜ - èµè·èŠ±ï¼Œé‡Žé¤å¹é£Ž","ðŸŒ¿ ç´«æºªæ¹¿åœ°å…¬å›­ - èµæ™¯æ‹ç…§ï¼Œè½»æ¾æ•£æ­¥","ðŸ¦¢ è§‚é¸Ÿèƒœåœ° - é‚‚é€…é‡Žç”Ÿé¸Ÿç±»","ðŸŒƒ ä¸‰å²”æ²³é•‡å¤œæ¸¸ - æ„Ÿå—å½“åœ°äººæ–‡"],itinerary:[{day:"ä¸Šåˆ",time:"08:30-10:00",content:"é¾™æµ·å±±Â·é¾™å‡¤å¯º - å¾’æ­¥ç™»å±±ï¼Œæ‹ç…§æ‰“å¡"},{day:"ä¸Šåˆ",time:"10:00-11:30",content:"ç™½æ°´å¡˜ - æ¬£èµè·èŠ±ï¼Œé‡Žé¤å¹é£Ž"},{day:"ä¸­åˆ",time:"11:30-13:00",content:"åˆé¥­+ä¼‘æ¯ - å›žå®¶åƒé¥­æˆ–é™„è¿‘å°åƒ"},{day:"ä¸‹åˆ",time:"13:30-15:00",content:"ç´«æºªæ¹¿åœ°å…¬å›­ - èµæ™¯ã€æ‹ç…§ã€è½»æ¾æ•£æ­¥"},{day:"ä¸‹åˆ",time:"15:00-16:00",content:"å›žç¨‹+å°é›¶é£Ÿ - ä¹°å¥¶èŒ¶å¥–åŠ±ä¸€ä¸‹è‡ªå·±"},{day:"æ™šä¸Š",time:"19:00-20:30",content:"é€›ä¸‰å²”æ²³é•‡ - æ™šé¥­åŽæ•£æ­¥ã€å¤œæ¸¸ã€æ„Ÿå—äººæ–‡"}],budget:{items:[{name:"äº¤é€š",amount:100,note:"å¾€è¿”è½¦è´¹/æ²¹è´¹"},{name:"é¤é¥®",amount:80,note:"åˆé¤+é›¶é£Ÿ+å¥¶èŒ¶"},{name:"é—¨ç¥¨",amount:20,note:"æ¹¿åœ°å…¬å›­é—¨ç¥¨"}],total:200},tips:["ðŸ“¸ æœ€ä½³æ‹ç…§ï¼šæ¸…æ™¨/å‚æ™šå…‰çº¿æŸ”å’Œ","ðŸŽ’ å»ºè®®æºå¸¦ï¼šé˜²æ™’éœœã€å¸½å­ã€æ°´","ðŸŒ¸ è·èŠ±æœ€ä½³è§‚èµæœŸï¼š7-8æœˆ","ðŸ¦¢ è§‚é¸Ÿæœ€ä½³æ—¶é—´ï¼šæ¸…æ™¨æˆ–å‚æ™š","ðŸ¥¾ ç©¿èˆ’é€‚çš„éž‹å­ï¼Œä¾¿äºŽå¾’æ­¥"]}},trip2:{title:"æ›²é–å¸‚åŒºä¸¤æ—¥æ¸¸",backgroundColor:"#f0e68c",dates:{start:"2025-08-10",end:"2025-08-11"},icon:"ðŸ™ï¸",overview:{basicInfo:{participants:"J.Grigg å’Œ Leo_Winston",departure:"é™†è‰¯",destination:"æ›²é–å¸‚åŒº",transport:"å¤§å·´å¾€è¿”",departureTime:"2025å¹´7æœˆ13æ—¥ 08:00",budget:"çº¦450å…ƒ/2äºº"},highlights:["ðŸ›ï¸ æ›²é–å¤åŸŽ - æŽ¢ç´¢åŽ†å²æ–‡åŒ–ï¼Œå“å‘³å¤éŸµ","ðŸœ è¿‡æ¡¥ç±³çº¿ - å“å°æ›²é–åœ°é“ç¾Žé£Ÿ","ðŸŒ³ éº’éºŸå…¬å›­ - åŸŽå¸‚ç»¿è‚ºï¼Œä¼‘é—²æ¼«æ­¥","ðŸ”ï¸ ç æ±Ÿæºé£Žæ™¯åŒº - æŽ¢å¯»ç æ±Ÿä¹‹æº","ðŸ›ï¸ å—åŸŽé—¨å•†åœˆ - ç‰¹äº§é‡‡è´­ï¼Œä½“éªŒç¹åŽ"],itinerary:[{day:"ç¬¬ä¸€å¤©",time:"08:00å‡ºå‘",content:"08:00é™†è‰¯å‡ºå‘ï¼ˆå¤§å·´ï¼‰â†’ æŠµè¾¾æ›²é– â†’ å…¥ä½é…’åº— â†’ æ›²é–å¤åŸŽæ¸¸è§ˆ â†’ å“å°è¿‡æ¡¥ç±³çº¿ â†’ éº’éºŸå…¬å›­æ•£æ­¥ â†’ æ™šé¤ä½“éªŒæœ¬åœ°ç‰¹è‰²",highlight:"ðŸ›ï¸ å¤åŸŽåŽ†å²éŸµå‘³æµ“åŽš"},{day:"ç¬¬äºŒå¤©",time:"å…¨å¤©",content:"æ—©é¤ â†’ ç æ±Ÿæºé£Žæ™¯åŒºæ¸¸è§ˆ â†’ åˆé¤ â†’ å—åŸŽé—¨å•†åœˆè´­ç‰© â†’ é‡‡è´­ç‰¹äº§ â†’ è¿”ç¨‹å›žé™†è‰¯",highlight:"ðŸ”ï¸ ç æ±ŸæºæŽ¢ç§˜ï¼Œè´­ç‰©ä¼‘é—²"}],budget:{items:[{name:"äº¤é€š",amount:150,note:"å¤§å·´å¾€è¿”"},{name:"ä½å®¿",amount:80,note:"1æ™šç»æµŽåž‹é…’åº—"},{name:"é¤é¥®",amount:150,note:"è¿‡æ¡¥ç±³çº¿+ç‰¹è‰²èœ"},{name:"é—¨ç¥¨",amount:50,note:"æ™¯ç‚¹é—¨ç¥¨"},{name:"ç¼“å†²",amount:20,note:"åº”æ€¥å¤‡ç”¨"}],total:450},tips:["ðŸœ å¿…å°ï¼šæ›²é–è¿‡æ¡¥ç±³çº¿ã€è’¸é¥µä¸","ðŸ›ï¸ å¤åŸŽæœ€ä½³æ¸¸è§ˆæ—¶é—´ï¼šä¸Šåˆæˆ–å‚æ™š","ðŸŽ’ å»ºè®®æºå¸¦ï¼šé›¨ä¼žã€é˜²æ™’ç”¨å“","ðŸ›ï¸ ç‰¹äº§æŽ¨èï¼šæ›²é–éŸ­èœèŠ±ã€å®£å¨ç«è…¿","ðŸ’° æå‰é¢„å®šé…’åº—ï¼Œæ€§ä»·æ¯”æ›´é«˜"]}},trip3:{title:"æ˜†æ˜Žä¸‰å¤©ä¸¤å¤œæ—…è¡Œ",backgroundColor:"#f0e68c",dates:{start:"2025-09-01",end:"2025-09-03"},icon:"ðŸŒ¸",overview:{basicInfo:{participants:"J.Grigg å’Œ Leo_Winston",departureTime:"2025å¹´7æœˆ19æ—¥ 08:00",returnTime:"ç¬¬ä¸‰å¤©ä¸‹åˆ 14:30-18:00",transport:"ä»¥åœ°é“/å…¬äº¤ä¸ºä¸»ï¼Œæ­¥è¡Œä¸ºè¾…",budget:"æ€»ä½“ä¸è¶…è¿‡450å…ƒ/äºº"},highlights:["ðŸŽ“ è¥¿å—è”å¤§æ—§å€ - æ„Ÿå—åŽ†å²åº•è•´ï¼Œæ ¡å›­äººæ–‡","ðŸŒ¸ ç¿ æ¹–å…¬å›­ - æ¹–è¾¹æ¼«æ­¥ï¼Œå†¬å­£è§‚çº¢å˜´é¸¥","ðŸ”ï¸ è¥¿å±±é£Žæ™¯åŒº - ç´¢é“ä¿¯çž°æ»‡æ± ï¼Œé¾™é—¨çŸ³çªŸ","ðŸŒŠ æ»‡æ± æµ·åŸ‚å…¬å›­ - é«˜åŽŸæ˜Žç ï¼Œæ‹ç…§åœ£åœ°","ðŸ„ é‡Žç”ŸèŒç«é”… - äº‘å—ç‰¹è‰²ï¼ŒèˆŒå°–äº«å—","ðŸŽ¡ å…¬å›­1903 - æ¬§å¼å»ºç­‘ï¼Œæ‘©å¤©è½®æ‰“å¡"],itinerary:[{day:"ç¬¬ä¸€å¤©ï¼ˆåŸŽå¸‚æ–‡è‰ºçº¿ï¼‰",time:"08:00-22:00",content:"08:00-12:00 å‡ºå‘+æŠµè¾¾æ˜†æ˜Ž+åœ°é“å‰å¾€è¥¿å—è”å¤§ â†’ 12:00-13:00 æ–‡æž—è¡—åˆé¤ï¼ˆç±³çº¿/çƒ§çƒ¤ï¼‰â†’ 13:00-15:00 è¥¿å—è”å¤§æ—§å€&äº‘å—å¤§å­¦ â†’ 15:00-17:00 æ–‡æž—è¡—+æ–‡åŒ–å··+ç¿ æ¹–å…¬å›­ â†’ 17:00-18:00 é™†å†›è®²æ­¦å ‚ â†’ 18:00-19:30 æ™šé¤ â†’ 20:00-21:30 æ–‡æž—è¡—å‘¨å›´æ•£æ­¥ â†’ 22:00å…¥ä½é…’åº—",highlight:"ðŸŽ“ æ„Ÿå—å¤§å­¦åŸŽæ–‡è‰ºæ°”æ¯ï¼ŒåŽ†å²å»ºç­‘æ‹ç…§"},{day:"ç¬¬äºŒå¤©ï¼ˆå±±æ°´è‡ªç„¶çº¿ï¼‰",time:"07:00-22:00",content:"07:00-08:00 æ—©é¤ï¼ˆè±†æµ†+çƒ§é¥µå—/å°é”…ç±³çº¿ï¼‰â†’ 08:00-12:30 è¥¿å±±é£Žæ™¯åŒºï¼ˆé¾™é—¨ï¼‰ï¼Œåœ°é“3å·çº¿+ç´¢é“ä¿¯çž°æ»‡æ±  â†’ 12:30-13:30 åˆé¤ â†’ 14:00-16:00 æ»‡æ± æµ·åŸ‚å…¬å›­æ¼«æ­¥æ‹ç…§ â†’ 16:30-18:00 å…¬å›­1903ï¼ˆæ¬§å¼å»ºç­‘/æ‘©å¤©è½®ï¼‰â†’ 18:30-20:00 æ™šé¤ï¼ˆç‚¸æ´‹èŠ‹/çƒ§çƒ¤ï¼‰â†’ 20:30-22:00 è¿”å›žé…’åº—ä¼‘æ¯",highlight:"ðŸ”ï¸ è¥¿å±±é¾™é—¨+æ»‡æ± ç¾Žæ™¯ï¼Œè‡ªç„¶é£Žå…‰æ»¡åˆ†"},{day:"ç¬¬ä¸‰å¤©ï¼ˆæ‚ é—²å¸‚äº•çº¿ï¼‰",time:"07:30-18:00",content:"07:30-08:30 æ—©é¤+é€€æˆ¿ â†’ 09:00-11:00 ä¸œå—äºšé£Žæƒ…å¸‚åœº+æ¹–æ»¨ç”Ÿæ€æ¹¿åœ°å…¬å›­ â†’ 11:30-13:00 åˆé¥­ â†’ 13:00-14:30 è‡ªç”±æ´»åŠ¨/è¡¥æ‹æ‰“å¡/é‡‡è´­ä¼´æ‰‹ç¤¼ â†’ 14:30-18:00 è¿”ç¨‹å›žé™†è‰¯",highlight:"ðŸ›ï¸ ä½“éªŒå¸‚äº•ç”Ÿæ´»ï¼Œé‡‡è´­äº‘å—ç‰¹äº§"}],budget:{items:[{name:"äº¤é€š",amount:150,note:"å¾€è¿”+åœ°é“/å…¬äº¤"},{name:"ä½å®¿",amount:160,note:"2æ™šç»æµŽåž‹é…’åº—"},{name:"é¤é¥®",amount:100,note:"ç±³çº¿+é‡Žç”ŸèŒ+å°åƒ"},{name:"é—¨ç¥¨",amount:40,note:"è¥¿å±±é¾™é—¨+å…¬å›­"}],total:450},tips:["ðŸš‡ è´­ä¹°åœ°é“ä¸€æ—¥ç¥¨ï¼Œæ›´åˆ’ç®—","ðŸ„ é‡Žç”ŸèŒå­£èŠ‚ï¼ˆ6-10æœˆï¼‰ï¼Œå¿…å°èŒç«é”…","ðŸŒ¸ ç¿ æ¹–å†¬å­£ï¼ˆ11æœˆ-3æœˆï¼‰å¯è§‚çº¢å˜´é¸¥","â˜€ï¸ æ˜†æ˜Žç´«å¤–çº¿å¼ºï¼Œæ³¨æ„é˜²æ™’","ðŸ¨ æå‰é¢„å®šé è¿‘åœ°é“ç«™çš„é…’åº—","ðŸ“¸ è¥¿å±±é¾™é—¨ç´¢é“ä¿¯çž°æ»‡æ± ï¼Œæœ€ä½³æ‹ç…§ç‚¹","ðŸ’° æ–‡æž—è¡—å°åƒæ€§ä»·æ¯”é«˜"]}},trip4:{title:"é•¿æ²™3å¤©2å¤œæ…¢æ—…è¡Œ",backgroundColor:"#f0e68c",dates:{start:"2025-10-01",end:"2025-10-03"},icon:"ðŸŒ¶ï¸",customStyles:{specialBg:"linear-gradient(135deg, #e8f4fd 0%, #d1ecf1 100%)",dayBorderColor:"#ff6b6b"},overview:{basicInfo:{destination:"é•¿æ²™",transport:"é«˜é“å¾€è¿”",duration:"3å¤©2å¤œ",theme:"ç¾Žé£Ÿ+æ–‡åŒ–+å¨±ä¹"},highlights:["ðŸ® æ©˜å­æ´²å¤´ - æ¯›æ³½ä¸œé’å¹´è‰ºæœ¯é›•å¡‘ï¼Œæ¹˜æ±Ÿç¾Žæ™¯","ðŸŒ¶ï¸ å¤ªå¹³è¡— - é•¿æ²™è‡­è±†è…ã€ç³–æ²¹ç²‘ç²‘ã€å°é¾™è™¾",'ðŸ›ï¸ å²³éº“ä¹¦é™¢ - åƒå¹´å­¦åºœï¼Œ"æƒŸæ¥šæœ‰æï¼ŒäºŽæ–¯ä¸ºç››"',"ðŸ‚ çˆ±æ™šäº­ - æœç‰§ã€Šå±±è¡Œã€‹å–æ™¯åœ°","ðŸŽ­ æ¹–å—å«è§† - å¨±ä¹ä¹‹éƒ½ï¼ŒèŠ’æžœå°æ‰“å¡","ðŸ›ï¸ æ¹–å—çœåšç‰©é¦† - é©¬çŽ‹å †æ±‰å¢“ï¼Œè¾›è¿½å¤«äºº","ðŸœ è§£æ”¾è¥¿è·¯ - å¤œç”Ÿæ´»åœ£åœ°ï¼Œé…’å§ä¸€æ¡è¡—"],itinerary:[{day:"ç¬¬ä¸€å¤©ï¼ˆåŸŽå¸‚åˆä½“éªŒï¼‰",time:"å…¨å¤©",content:"æŠµè¾¾é•¿æ²™ â†’ å…¥ä½é…’åº— â†’ æ©˜å­æ´²å¤´ï¼ˆåœ°é“2å·çº¿ï¼‰çœ‹æ¹˜æ±Ÿ+æ¯›æ³½ä¸œé›•å¡‘ â†’ å¤ªå¹³è¡—ç¾Žé£Ÿè¡—ï¼ˆè‡­è±†è…/ç³–æ²¹ç²‘ç²‘/èŒ¶é¢œæ‚¦è‰²ï¼‰â†’ é»„å…´è·¯æ­¥è¡Œè¡— â†’ è§£æ”¾è¥¿è·¯é…’å§è¡—å¤œç”Ÿæ´»",highlight:"ðŸ® æ„Ÿå—é•¿æ²™çƒŸç«æ°”ï¼Œå“å°åœ°é“å°åƒ"},{day:"ç¬¬äºŒå¤©ï¼ˆæ–‡åŒ–æ·±åº¦æ¸¸ï¼‰",time:"å…¨å¤©",content:"å²³éº“å±±å¾’æ­¥ï¼ˆç´¢é“ä¸Šå±±ï¼Œæ­¥è¡Œä¸‹å±±ï¼‰â†’ å²³éº“ä¹¦é™¢ï¼ˆé—¨ç¥¨50å…ƒï¼‰â†’ çˆ±æ™šäº­æ‹ç…§ â†’ æ¹–å—å¤§å­¦æ ¡å›­ â†’ æ²³è¥¿å¤§å­¦åŸŽç¾Žé£Ÿ â†’ æ¹˜æ±Ÿè¾¹æ•£æ­¥çœ‹å¤œæ™¯",highlight:"ðŸ›ï¸ åƒå¹´å­¦åºœæ–‡åŒ–ç†é™¶ï¼Œå±±æ°´ä¹‹é—´å¾’æ­¥"},{day:"ç¬¬ä¸‰å¤©ï¼ˆåšç‰©é¦†+è´­ç‰©ï¼‰",time:"è¿”ç¨‹å‰",content:"æ¹–å—çœåšç‰©é¦†ï¼ˆé©¬çŽ‹å †æ±‰å¢“ï¼Œéœ€é¢„çº¦ï¼‰â†’ IFSå›½é‡‘ä¸­å¿ƒ/äº”ä¸€å¹¿åœºè´­ç‰© â†’ æ‰“å¡ç½‘çº¢åº— â†’ é‡‡è´­ç‰¹äº§ï¼ˆé…±æ¿é¸­/æ§Ÿæ¦”/è¾£æ¡ï¼‰â†’ é«˜é“è¿”ç¨‹",highlight:"ðŸ›ï¸ æŽ¢ç§˜ä¸¤åƒå¹´å¤å¢“ï¼ŒçŽ°ä»£ä¸ŽåŽ†å²äº¤èž"}],budget:{items:[{name:"é«˜é“å¾€è¿”",amount:800,note:"äºŒç­‰åº§"},{name:"ä½å®¿",amount:600,note:"2æ™šå¸‚ä¸­å¿ƒé…’åº—"},{name:"é¤é¥®",amount:500,note:"æ¹˜èœ+å°åƒ+å¥¶èŒ¶"},{name:"é—¨ç¥¨",amount:100,note:"å²³éº“ä¹¦é™¢50+ç´¢é“"},{name:"å¸‚å†…äº¤é€š",amount:50,note:"åœ°é“+å…¬äº¤"}],total:2050},tips:["ðŸŒ¶ï¸ é•¿æ²™èœåè¾£ï¼Œä¸åƒè¾£æå‰è¯´æ˜Ž","ðŸŽ« æ¹–å—çœåšç‰©é¦†éœ€æå‰3å¤©é¢„çº¦","â˜• èŒ¶é¢œæ‚¦è‰²æ˜¯é•¿æ²™ç‰¹è‰²å¥¶èŒ¶ï¼Œå¿…æ‰“å¡","ðŸš‡ åŠžç†é•¿æ²™åœ°é“3æ—¥å¡æ›´åˆ’ç®—","ðŸ¨ ä½äº”ä¸€å¹¿åœº/é»„å…´è·¯é™„è¿‘ï¼Œäº¤é€šä¾¿åˆ©","ðŸ“¸ æ©˜å­æ´²çƒŸèŠ±ï¼šæ¯å‘¨å…­æ™š20:30ï¼ˆå¤å­£ï¼‰","ðŸœ å¿…åƒï¼šæ–‡å’Œå‹ã€ç‚ŠçƒŸæ—¶ä»£å°ç‚’é»„ç‰›è‚‰"]}}},ne=e=>ae[e]||{title:"æ—…è¡Œè®¡åˆ’",backgroundColor:"#f0e68c",dates:null,icon:"ðŸ—ºï¸"};var ie=a(432);const le={class:"card"},se={class:"card-body"},oe={class:"progress-container"},re={key:0,class:"text-muted text-center mt-3 mb-0"};function ce(e,t,a,l,s,o){return(0,n.uX)(),(0,n.CE)("div",le,[(0,n.Lk)("div",se,[t[0]||(t[0]=(0,n.Lk)("h3",{class:"mb-3"},"ðŸŒŠ æ—…è¡Œè¿›åº¦æ¡",-1)),(0,n.Lk)("div",oe,[(0,n.Lk)("div",{class:"progress-bar",style:(0,i.Tr)({width:l.progress+"%"})},(0,i.v_)(l.progress)+"% ",5)]),l.message?((0,n.uX)(),(0,n.CE)("p",re,(0,i.v_)(l.message),1)):(0,n.Q3)("",!0)])])}var de={name:"TripProgress",props:{startDate:{type:String,default:null},endDate:{type:String,default:null}},setup(e){const t=(0,P.KR)(0),a=(0,P.KR)(""),i=()=>{if(!e.startDate||!e.endDate)return t.value=50,void(a.value="æ—…è¡Œè¿›åº¦åŠ è½½ä¸­...");const n=new Date,i=new Date(e.startDate),l=new Date(e.endDate);if(n<i)t.value=0,a.value="æ—…è¡Œå³å°†å¼€å§‹ï¼";else if(n>l)t.value=100,a.value="æ—…è¡Œå·²ç»“æŸï¼ŒæœŸå¾…ä¸‹æ¬¡æ—…ç¨‹ï¼";else{const e=l-i,s=n-i;t.value=Math.round(s/e*100),a.value=`æ—…è¡Œè¿›è¡Œä¸­ï¼Œå·²å®Œæˆ ${t.value}%`}};return(0,n.sV)(()=>{i()}),{progress:t,message:a}}},ue=a(1241);const me=(0,ue.A)(de,[["render",ce],["__scopeId","data-v-3d7e4ff4"]]);var pe=me;const ve={class:"stats-card"},ge={class:"stats-container"},be={class:"stat-item"},ke={class:"stat-text"},ye={class:"stat-item"},fe={class:"stat-text"},he=["disabled"],Ce={key:0,class:"spinner-border spinner-border-sm me-2"};function Le(e,t,a,l,s,o){return(0,n.uX)(),(0,n.CE)("div",ve,[(0,n.Lk)("div",ge,[(0,n.Lk)("div",be,[t[2]||(t[2]=(0,n.Lk)("span",{class:"stat-icon"},"ðŸ‘ï¸",-1)),(0,n.Lk)("span",ke,[t[1]||(t[1]=(0,n.eW)("æµè§ˆé‡ï¼š",-1)),(0,n.Lk)("strong",null,(0,i.v_)(a.views),1)])]),t[5]||(t[5]=(0,n.Lk)("div",{class:"stat-divider"},"ï½œ",-1)),(0,n.Lk)("div",ye,[t[4]||(t[4]=(0,n.Lk)("span",{class:"stat-icon"},"â¤ï¸",-1)),(0,n.Lk)("span",fe,[t[3]||(t[3]=(0,n.eW)("ç‚¹èµžï¼š",-1)),(0,n.Lk)("strong",null,(0,i.v_)(a.likes),1)])])]),(0,n.Lk)("button",{class:"like-btn",onClick:t[0]||(t[0]=(...e)=>l.handleLike&&l.handleLike(...e)),disabled:l.liking||!a.canLike,title:"ç‚¹èµžï¼ˆä»…å…¬å¼€è¡Œç¨‹å¯ç”¨ï¼‰"},[l.liking?((0,n.uX)(),(0,n.CE)("span",Ce)):(0,n.Q3)("",!0),(0,n.eW)(" ðŸ‘ "+(0,i.v_)(l.liking?"ç‚¹èµžä¸­...":"ç‚¹èµž"),1)],8,he)])}var we={name:"TripStats",props:{views:{type:Number,default:0},likes:{type:Number,default:0},canLike:{type:Boolean,default:!0}},emits:["like"],setup(e,{emit:t}){const a=(0,P.KR)(!1),n=async()=>{a.value=!0;try{await t("like")}finally{setTimeout(()=>{a.value=!1},500)}};return{liking:a,handleLike:n}}};const _e=(0,ue.A)(we,[["render",Le],["__scopeId","data-v-c6ff6d62"]]);var Ee=_e;const Ie={class:"card"},Re={class:"card-body"},Xe={class:"mb-3"};function Se(e,t,a,l,s,o){return(0,n.uX)(),(0,n.CE)("div",Ie,[(0,n.Lk)("div",Re,[(0,n.Lk)("h3",Xe,"ðŸ“‹ "+(0,i.v_)(a.title),1),(0,n.RG)(e.$slots,"default",{},void 0,!0)])])}var Ae={name:"TripOverview",props:{title:{type:String,default:"è¡Œç¨‹æ¦‚è§ˆ"}}};const xe=(0,ue.A)(Ae,[["render",Se],["__scopeId","data-v-f357579e"]]);var De=xe,Qe=a(5130);const Fe={class:"card"},Me={class:"card-body"},$e={key:0,class:"mb-3"},Ke={class:"comment-list"},We={class:"d-flex justify-content-between align-items-center mb-3"},Te={class:"mb-0"},Be={key:0,class:"text-center text-muted py-4"},Ue=["onClick"],Ve=["onClick"],Ne=["onClick","title"],Pe=["onClick"],qe=["onClick"],Ge=["src"];function Je(e,t,a,l,s,o){const r=(0,n.g2)("CommentForm"),c=(0,n.g2)("ReplySection"),d=(0,n.g2)("CommentItem");return(0,n.uX)(),(0,n.CE)("div",Fe,[(0,n.Lk)("div",Me,[t[6]||(t[6]=(0,n.Lk)("h3",{class:"mb-4"},"ðŸŒ³ Roamio Stories.",-1)),a.isAuthor?((0,n.uX)(),(0,n.CE)("div",$e,[l.showForm?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"btn btn-outline-secondary mb-3",onClick:t[1]||(t[1]=e=>l.showForm=!1)}," å–æ¶ˆè®°å½• ")):((0,n.uX)(),(0,n.CE)("button",{key:0,class:"btn btn-outline-primary",onClick:t[0]||(t[0]=e=>l.showForm=!0)}," âœï¸ è®°å½•ä¸€ä¸‹ "))])):(0,n.Q3)("",!0),a.isAuthor&&l.showForm?((0,n.uX)(),(0,n.Wv)(r,{key:1,submitting:l.submitting,onSubmit:l.handleSubmit},null,8,["submitting","onSubmit"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Ke,[(0,n.Lk)("div",We,[(0,n.Lk)("h5",Te,"è®°å½•åˆ—è¡¨ ("+(0,i.v_)(a.comments.length)+"æ¡)",1),l.hasManageableComments?((0,n.uX)(),(0,n.CE)("button",{key:0,class:(0,i.C4)(["btn btn-sm",l.isManageMode?"btn-secondary":"btn-outline-secondary"]),onClick:t[2]||(t[2]=(...e)=>l.toggleManageMode&&l.toggleManageMode(...e)),title:"ç®¡ç†è¯„è®º"},(0,i.v_)(l.isManageMode?"å®Œæˆç®¡ç†":"ç®¡ç†è¯„è®º"),3)):(0,n.Q3)("",!0)]),0===a.comments.length?((0,n.uX)(),(0,n.CE)("div",Be," æš‚æ— è®°å½•ï¼Œå¿«æ¥ç•™ä¸‹ä½ çš„æ—…è¡Œè„šå°å§ï¼ ")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.comments,e=>((0,n.uX)(),(0,n.Wv)(d,{key:e.id,comment:e,editing:void 0!==l.editingComments[e.id]&&!1!==l.editingComments[e.id],"is-expanded":l.expandedReplies[e.id]||!1,"reply-count":(l.replyLists[e.id]||[]).length,replies:l.replyLists[e.id]||[],"get-avatar-url":a.getAvatarUrl,onShowImageModal:l.showImageModal,onToggleReply:l.toggleReplySection,"onUpdate:content":t=>l.updateLocalContent(e.id,t)},{actions:(0,n.k6)(()=>[l.isManageMode?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[e.can_delete&&!l.editingComments[e.id]?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"btn btn-sm btn-outline-primary",onClick:t=>l.startEditing(e.id,e.content),title:"ç¼–è¾‘è¯„è®º"}," âœï¸ ",8,Ue)):(0,n.Q3)("",!0),l.editingComments[e.id]?((0,n.uX)(),(0,n.CE)("button",{key:1,class:"btn btn-sm btn-success",onClick:t=>l.handleSaveComment(e.id),title:"ä¿å­˜ä¿®æ”¹"}," âœ“ ",8,Ve)):(0,n.Q3)("",!0),l.canAddImage(e)&&l.editingComments[e.id]?((0,n.uX)(),(0,n.CE)("button",{key:2,class:"btn btn-sm btn-outline-success",onClick:t=>l.handleAddImage(e.id),title:e.image?"æ›¿æ¢å›¾ç‰‡":"æ·»åŠ å›¾ç‰‡"}," ðŸ“· ",8,Ne)):(0,n.Q3)("",!0),l.editingComments[e.id]?((0,n.uX)(),(0,n.CE)("button",{key:3,class:"btn btn-sm btn-outline-secondary",onClick:t=>l.cancelEditing(e.id),title:"å–æ¶ˆ"}," âœ• ",8,Pe)):(0,n.Q3)("",!0),e.can_delete?((0,n.uX)(),(0,n.CE)("button",{key:4,class:"btn btn-sm btn-outline-danger",onClick:t=>l.handleDelete(e.id),title:"åˆ é™¤è¿™æ¡è¯„è®º"}," ðŸ—‘ï¸ ",8,qe)):(0,n.Q3)("",!0)],64)):(0,n.Q3)("",!0)]),replies:(0,n.k6)(()=>[l.expandedReplies[e.id]?((0,n.uX)(),(0,n.Wv)(c,{key:0,expanded:l.expandedReplies[e.id],replies:l.replyLists[e.id]||[],submitting:l.submittingReply[e.id]||!1,"get-avatar-url":a.getAvatarUrl,onSubmit:t=>l.handleSubmitReply(e.id,t),onCancel:()=>l.cancelReply(e.id),onDeleteReply:l.handleDeleteReply},null,8,["expanded","replies","submitting","get-avatar-url","onSubmit","onCancel","onDeleteReply"])):(0,n.Q3)("",!0)]),_:2},1032,["comment","editing","is-expanded","reply-count","replies","get-avatar-url","onShowImageModal","onToggleReply","onUpdate:content"]))),128))])]),l.showModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"image-modal",onClick:t[5]||(t[5]=(...e)=>l.closeImageModal&&l.closeImageModal(...e))},[(0,n.Lk)("div",{class:"modal-content",onClick:t[4]||(t[4]=(0,Qe.D$)(()=>{},["stop"]))},[(0,n.Lk)("button",{class:"close-button",onClick:t[3]||(t[3]=(...e)=>l.closeImageModal&&l.closeImageModal(...e))},"âœ•"),(0,n.Lk)("img",{src:l.modalImageUrl,alt:"æ”¾å¤§å›¾ç‰‡"},null,8,Ge)])])):(0,n.Q3)("",!0)])}const je={class:"comment-form mb-4"},Oe={class:"mb-3"},Ye={class:"row mb-3"},He={class:"col-md-6 mb-2"},ze={class:"col-md-6 mb-2"},Ze=["disabled"],et={key:0,class:"spinner-border spinner-border-sm me-2"};function tt(e,t,a,l,s,o){return(0,n.uX)(),(0,n.CE)("div",je,[t[6]||(t[6]=(0,n.Lk)("h5",{class:"mb-3"},"è®°å½•ä¸€ä¸‹",-1)),(0,n.Lk)("form",{onSubmit:t[3]||(t[3]=(0,Qe.D$)((...e)=>l.handleSubmit&&l.handleSubmit(...e),["prevent"]))},[(0,n.Lk)("div",Oe,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.formData.content=e),class:"form-control",rows:"4",placeholder:"åˆ†äº«ä½ çš„æ—…è¡Œæ•…äº‹...",required:""},null,512),[[Qe.Jo,l.formData.content]])]),(0,n.Lk)("div",Ye,[(0,n.Lk)("div",He,[t[4]||(t[4]=(0,n.Lk)("label",{class:"form-label"},"ä¸Šä¼ å›¾ç‰‡",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:t[1]||(t[1]=(...e)=>l.handleImageChange&&l.handleImageChange(...e))},null,32)]),(0,n.Lk)("div",ze,[t[5]||(t[5]=(0,n.Lk)("label",{class:"form-label"},"ä¸Šä¼ è§†é¢‘",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"video/*",onChange:t[2]||(t[2]=(...e)=>l.handleVideoChange&&l.handleVideoChange(...e))},null,32)])]),(0,n.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:a.submitting},[a.submitting?((0,n.uX)(),(0,n.CE)("span",et)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,i.v_)(a.submitting?"è®°å½•ä¸­...":"è®°å½•ä¸€ä¸‹"),1)],8,Ze)],32)])}var at={name:"CommentForm",props:{submitting:{type:Boolean,default:!1}},emits:["submit"],setup(e,{emit:t}){const a=(0,P.KR)({content:"",image:null,video:null}),n=e=>{a.value.image=e.target.files[0]},i=e=>{a.value.video=e.target.files[0]},l=()=>{t("submit",{content:a.value.content,image:a.value.image,video:a.value.video}),a.value={content:"",image:null,video:null}};return{formData:a,handleImageChange:n,handleVideoChange:i,handleSubmit:l}}};const nt=(0,ue.A)(at,[["render",tt],["__scopeId","data-v-a9f54938"]]);var it=nt;const lt={class:"comment-item"},st={class:"d-flex align-items-start"},ot=["src"],rt={class:"flex-grow-1"},ct={class:"d-flex justify-content-between align-items-center mb-2"},dt={class:"d-flex gap-2 align-items-center actions-wrap"},ut={class:"text-muted"},mt={key:0,class:"mb-2"},pt={key:1,class:"mb-2"},vt={key:2,class:"mb-2 comment-media"},gt=["src"],bt={key:3,class:"mb-2 comment-media"},kt=["src"],yt={class:"mt-3 pt-2 border-top border-light d-flex gap-2 align-items-center"},ft={key:0,class:"text-muted small"},ht={key:0,class:"replies-container"};function Ct(e,t,a,l,s,o){return(0,n.uX)(),(0,n.CE)("div",lt,[(0,n.Lk)("div",st,[(0,n.Lk)("img",{src:a.getAvatarUrl(a.comment.user.profile?.avatar_url),class:"rounded-circle me-3",width:"48",height:"48",alt:"avatar",onError:t[0]||(t[0]=e=>{console.log("å¤´åƒåŠ è½½å¤±è´¥:",a.comment.user),e.target.src="/static/images/default_avatar.png"})},null,40,ot),(0,n.Lk)("div",rt,[(0,n.Lk)("div",ct,[(0,n.Lk)("strong",null,(0,i.v_)(a.comment.user.username),1),(0,n.Lk)("div",dt,[(0,n.Lk)("small",ut,(0,i.v_)(l.formatDate(a.comment.timestamp)),1),(0,n.RG)(e.$slots,"actions",{},void 0,!0)])]),a.editing?((0,n.uX)(),(0,n.CE)("div",mt,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.localContent=e),class:"form-control",rows:"3",placeholder:"ç¼–è¾‘è¯„è®ºå†…å®¹..."},null,512),[[Qe.Jo,l.localContent]])])):((0,n.uX)(),(0,n.CE)("p",pt,(0,i.v_)(a.comment.content),1)),a.comment.image?((0,n.uX)(),(0,n.CE)("div",vt,[(0,n.Lk)("img",{src:a.comment.image,class:"comment-image rounded",style:{cursor:"pointer"},onClick:t[2]||(t[2]=t=>e.$emit("show-image-modal",a.comment.image)),alt:"è¯„è®ºå›¾ç‰‡"},null,8,gt)])):(0,n.Q3)("",!0),a.comment.video?((0,n.uX)(),(0,n.CE)("div",bt,[(0,n.Lk)("video",{src:a.comment.video,controls:"",class:"rounded"}," æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ ",8,kt)])):(0,n.Q3)("",!0),(0,n.Lk)("div",yt,[(0,n.Lk)("button",{class:"btn btn-sm btn-link text-primary p-0 reply-toggle-btn",onClick:t[3]||(t[3]=t=>e.$emit("toggle-reply",a.comment.id))}," ðŸ’¬ "+(0,i.v_)(a.isExpanded?"æ”¶èµ·å›žå¤":"å›žå¤"),1),a.replyCount?((0,n.uX)(),(0,n.CE)("span",ft," ("+(0,i.v_)(a.replyCount)+"æ¡å›žå¤) ",1)):(0,n.Q3)("",!0)])])]),a.isExpanded?((0,n.uX)(),(0,n.CE)("div",ht,[(0,n.RG)(e.$slots,"replies",{},void 0,!0)])):(0,n.Q3)("",!0)])}var Lt={name:"CommentItem",props:{comment:{type:Object,required:!0},editing:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},replyCount:{type:Number,default:0},replies:{type:Array,default:()=>[]},getAvatarUrl:{type:Function,required:!0}},emits:["show-image-modal","toggle-reply","update:content"],setup(e,{emit:t}){const a=(0,P.KR)(e.comment.content);(0,n.wB)(()=>e.comment.content,e=>{a.value=e}),(0,n.wB)(a,e=>{t("update:content",e)});const i=e=>{const t=new Date(e),a=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return`${a}-${n}-${i} ${l}:${s}`};return{localContent:a,formatDate:i}}};const wt=(0,ue.A)(Lt,[["render",Ct],["__scopeId","data-v-61f6a5ea"]]);var _t=wt;const Et={key:0,class:"reply-section"},It={class:"reply-form mb-3"},Rt={class:"mt-2 d-flex gap-2"},Xt=["disabled"],St={key:0,class:"spinner-border spinner-border-sm me-1"},At={key:0,class:"reply-list"},xt={class:"d-flex align-items-start"},Dt=["src"],Qt={class:"flex-grow-1"},Ft={class:"d-flex justify-content-between align-items-center mb-1"},Mt={class:"small"},$t={class:"d-flex gap-2 align-items-center"},Kt={class:"text-muted"},Wt=["onClick"],Tt={class:"mb-0 small"};function Bt(e,t,a,l,s,o){return a.expanded?((0,n.uX)(),(0,n.CE)("div",Et,[(0,n.Lk)("div",It,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.replyContent=e),class:"form-control form-control-sm",rows:"2",placeholder:"å†™ä¸‹ä½ çš„å›žå¤..."},null,512),[[Qe.Jo,l.replyContent]]),(0,n.Lk)("div",Rt,[(0,n.Lk)("button",{class:"btn btn-sm btn-primary",onClick:t[1]||(t[1]=(...e)=>l.handleSubmit&&l.handleSubmit(...e)),disabled:a.submitting},[a.submitting?((0,n.uX)(),(0,n.CE)("span",St)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,i.v_)(a.submitting?"æäº¤ä¸­...":"æäº¤å›žå¤"),1)],8,Xt),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t[2]||(t[2]=(...e)=>l.handleCancel&&l.handleCancel(...e))}," å–æ¶ˆ ")])]),a.replies&&a.replies.length>0?((0,n.uX)(),(0,n.CE)("div",At,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.replies,t=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:"reply-item mt-2 ps-3 border-start border-secondary"},[(0,n.Lk)("div",xt,[(0,n.Lk)("img",{src:a.getAvatarUrl(t.user.profile?.avatar_url),class:"rounded-circle me-2",width:"32",height:"32",alt:"avatar"},null,8,Dt),(0,n.Lk)("div",Qt,[(0,n.Lk)("div",Ft,[(0,n.Lk)("strong",Mt,(0,i.v_)(t.user.username),1),(0,n.Lk)("div",$t,[(0,n.Lk)("small",Kt,(0,i.v_)(l.formatDate(t.timestamp)),1),t.can_delete?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"btn btn-sm p-0 text-danger",style:{border:"none",background:"none","font-size":"0.8rem"},onClick:a=>e.$emit("delete-reply",t.id),title:"åˆ é™¤æ­¤å›žå¤"}," ðŸ—‘ï¸ ",8,Wt)):(0,n.Q3)("",!0)])]),(0,n.Lk)("p",Tt,(0,i.v_)(t.content),1)])])]))),128))])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)}var Ut={name:"ReplySection",props:{expanded:{type:Boolean,default:!1},replies:{type:Array,default:()=>[]},submitting:{type:Boolean,default:!1},getAvatarUrl:{type:Function,required:!0}},emits:["submit","cancel","delete-reply"],setup(e,{emit:t}){const a=(0,P.KR)("");(0,n.wB)(()=>e.expanded,e=>{e||(a.value="")});const i=()=>{const e=a.value.trim();e&&(t("submit",e),a.value="")},l=()=>{a.value="",t("cancel")},s=e=>{const t=new Date(e),a=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return`${a}-${n}-${i} ${l}:${s}`};return{replyContent:a,handleSubmit:i,handleCancel:l,formatDate:s}}};const Vt=(0,ue.A)(Ut,[["render",Bt],["__scopeId","data-v-5253a071"]]);var Nt=Vt,Pt={name:"CommentSection",components:{CommentForm:it,CommentItem:_t,ReplySection:Nt},props:{comments:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isAuthor:{type:Boolean,default:!1},getAvatarUrl:{type:Function,required:!0}},emits:["submit-comment","delete-comment","add-image","update-comment","submit-reply","load-replies"],setup(e,{emit:t}){const a=(0,P.KR)(!1),i=(0,P.KR)(!1),l=(0,P.KR)({}),s=(0,P.KR)(!1),o=(0,P.KR)(!1),r=(0,P.KR)(""),c=(0,P.KR)({}),d=(0,P.KR)({}),u=(0,P.KR)({}),m=(0,P.KR)({}),p=(0,P.KR)({}),v=(0,n.EW)(()=>e.comments.some(e=>e.can_delete)),g=async e=>{a.value=!0;try{await t("submit-comment",e)}finally{a.value=!1}},b=e=>{t("delete-comment",e)},k=e=>{r.value=e,o.value=!0},y=()=>{o.value=!1,r.value=""},f=e=>!e.video&&e.can_delete,h=(e,t)=>{l.value[e]={isEditing:!0,content:t}},C=e=>{l.value[e]=!1},L=(e,t)=>{l.value[e]&&(l.value[e].content=t)},w=e=>{const a=l.value[e]?.content;a&&a.trim()&&(t("update-comment",{commentId:e,content:a.trim()}),l.value[e]=!1)},_=()=>{s.value=!s.value,s.value||(l.value={})},E=e=>{const a=document.createElement("input");a.type="file",a.accept="image/*",a.onchange=a=>{const n=a.target.files[0];n&&(t("add-image",{commentId:e,file:n}),l.value[e]=!1)},a.click()},I=e=>{c.value[e]=!c.value[e],c.value[e]&&(d.value[e]||(d.value[e]={content:""}),void 0===u.value[e]&&(u.value[e]=!1),m.value[e]||(m.value[e]=[],t("load-replies",e)))},R=async(e,a)=>{u.value[e]=!0;try{await t("submit-reply",{commentId:e,content:a}),d.value[e].content=""}catch(n){console.error("æäº¤å›žå¤å¤±è´¥:",n),alert("æäº¤å›žå¤å¤±è´¥")}finally{u.value[e]=!1}},X=e=>{d.value[e].content=""},S=e=>{t("delete-comment",e)},A=(e,t)=>{m.value={...m.value,[e]:t||[]}};return{submitting:a,showForm:i,editingComments:l,isManageMode:s,hasManageableComments:v,expandedReplies:c,replyForms:d,submittingReply:u,replyLists:m,replyCounts:p,showModal:o,modalImageUrl:r,handleSubmit:g,handleDelete:b,showImageModal:k,closeImageModal:y,canAddImage:f,startEditing:h,cancelEditing:C,updateLocalContent:L,handleSaveComment:w,toggleManageMode:_,handleAddImage:E,toggleReplySection:I,handleSubmitReply:R,cancelReply:X,handleDeleteReply:S,updateReplyList:A}}};const qt=(0,ue.A)(Pt,[["render",Je],["__scopeId","data-v-3602920b"]]);var Gt=qt,Jt={name:"TripDetailView",components:{NavBar:ie.A,TripProgress:pe,TripStats:Ee,TripOverview:De,CommentSection:Gt},setup(){const e=(0,q.lq)(),t=(0,q.rd)(),a=(0,G.k)(),i=(0,P.KR)(null),l=(0,P.KR)([]),s=(0,P.KR)(!0),o=(0,P.KR)(null),r=(0,P.KR)(!1),c=(0,P.KR)(null),d=(0,n.EW)(()=>{const e=i.value?.background_music;return""===e?"":e||"/static/music/rain.mp3"}),u=(0,n.EW)(()=>a.isAdmin),m=()=>{if(!a.isLoggedIn){const a=e.fullPath||window.location.pathname;return t.push({path:"/login/",query:{next:a}}),!1}return!0},p=(0,n.EW)(()=>i.value?.author?.id===a.userInfo?.id),v=async()=>{const a=e.params.slug;try{if(i.value=await(0,J.B)(a),i.value.stats||(i.value.stats={views:0,likes:0}),i.value.overview){const e={...i.value.overview};e.budget&&e.budget.summary&&(e.budget.total=e.budget.summary),o.value={dates:{start:i.value.start_date,end:i.value.end_date},overview:e}}else o.value=ne(a);try{let e;e=i.value&&i.value.overview?await(0,J.mb)(a):await(0,J.lr)(a),e&&(i.value.stats={views:e.views,likes:e.likes})}catch(n){}(i.value?.name||i.value?.title)&&(document.title=`${i.value.name||i.value.title}`)}catch(l){console.error("èŽ·å–æ—…è¡Œè¯¦æƒ…å¤±è´¥:",l),404!==l.response?.status&&404!==l.status||(alert("æ—…è¡Œé¡µé¢ä¸å­˜åœ¨"),t.push("/"))}},g=async()=>{const t=e.params.slug;try{const e=await O({trip:t});l.value=e.results||e||[]}catch(a){console.error("èŽ·å–è¯„è®ºåˆ—è¡¨å¤±è´¥:",a),l.value=[]}finally{s.value=!1}},b=async()=>{if(m())try{const t=e.params.slug;let a;a=i.value&&i.value.overview?await(0,J.aD)(t):await(0,J.nN)(t),i.value.stats&&(i.value.stats.likes=a.likes),alert("ç‚¹èµžæˆåŠŸï¼")}catch(t){console.error("ç‚¹èµžå¤±è´¥:",t),alert("ç‚¹èµžå¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•")}},k=async t=>{if(m())try{const a=new FormData;a.append("page",e.params.slug),t.content&&a.append("content",t.content),t.image&&a.append("image",t.image),t.video&&a.append("video",t.video),await Y(a),alert("è¯„è®ºå‘è¡¨æˆåŠŸï¼"),await g()}catch(a){console.error("å‘è¡¨è¯„è®ºå¤±è´¥:",a),alert("å‘è¡¨è¯„è®ºå¤±è´¥ï¼š"+a.message)}},y=async e=>{if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡å†…å®¹å—ï¼Ÿåˆ é™¤åŽæ— æ³•æ¢å¤ã€‚"))return;try{await H(e)}catch(s){console.error("åˆ é™¤è¯„è®ºå¤±è´¥:",s);const e=s.response?.data?.detail||s.message||"åˆ é™¤å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•";return void alert(e)}const t=l.value.find(t=>t.id===e);if(!t){for(const t of l.value)if(L.value&&L.value.replyLists){const a=L.value.replyLists[t.id];if(a&&a.some(t=>t.id===e)){const n=a.filter(t=>t.id!==e);return void(L.value.updateReplyList&&L.value.updateReplyList(t.id,n))}}return}const a=!!t.parent_id,n=t.parent_id;let i=null;a?(i=l.value.find(e=>e.id===n),i&&i.replies&&(i.replies=i.replies.filter(t=>t.id!==e),L.value&&L.value.updateReplyList&&L.value.updateReplyList(n,i.replies))):l.value=l.value.filter(t=>t.id!==e)},f=async({commentId:e,file:t})=>{try{const a=new FormData;a.append("image",t),await z(e,a),alert("å›¾ç‰‡æ·»åŠ æˆåŠŸï¼"),await g()}catch(a){console.error("æ·»åŠ å›¾ç‰‡å¤±è´¥:",a),alert("æ·»åŠ å›¾ç‰‡å¤±è´¥ï¼š"+(a.response?.data?.detail||a.message))}},h=async({commentId:e,content:t})=>{try{await Z(e,{content:t}),alert("è¯„è®ºæ›´æ–°æˆåŠŸï¼"),await g()}catch(a){console.error("æ›´æ–°è¯„è®ºå¤±è´¥:",a),alert("æ›´æ–°è¯„è®ºå¤±è´¥ï¼š"+(a.response?.data?.detail||a.message))}},C=async({commentId:t,content:a})=>{if(m())try{const n=new FormData;n.append("content",a),n.append("page",e.params.slug),n.append("parent",t),await Y(n),alert("å›žå¤æˆåŠŸï¼"),await w(t)}catch(n){console.error("æäº¤å›žå¤å¤±è´¥:",n),alert("æäº¤å›žå¤å¤±è´¥ï¼š"+(n.response?.data?.detail||n.message))}},L=(0,P.KR)(null),w=async e=>{try{const t=await ee(e),a=l.value.find(t=>t.id===e);a&&(a.replies=t||[]),await new Promise(e=>setTimeout(e,100)),L.value&&L.value.updateReplyList&&L.value.updateReplyList(e,t||[])}catch(t){console.error(`åŠ è½½è¯„è®º ${e} çš„å›žå¤åˆ—è¡¨å¤±è´¥:`,t)}},_=()=>{t.push("/")},E=async()=>{if(!c.value)return;const e=c.value.getAttribute("src")||"";if(e){if(r.value)c.value.pause();else try{c.value.volume=.3,await c.value.play()}catch(t){console.error("æ’­æ”¾éŸ³ä¹å¤±è´¥:",t),alert("æ’­æ”¾å¤±è´¥ï¼šè¯¥æµè§ˆå™¨æˆ–å½“å‰æ ¼å¼ä¸å—æ”¯æŒ")}r.value=!r.value}else alert("æœªé€‰æ‹©èƒŒæ™¯éŸ³ä¹ï¼Œæ— æ³•æ’­æ”¾")},I=()=>{if(L.value&&L.value.$el)return void L.value.$el.scrollIntoView({behavior:"smooth",block:"start"});const e=document.querySelector(".comment-list");e&&e.scrollIntoView({behavior:"smooth",block:"start"})};(0,n.wB)(d,async()=>{if(c.value){try{c.value.load()}catch(e){}if(r.value)try{c.value.volume=.3,await c.value.play()}catch(e){}}});let R=null;return(0,n.sV)(async()=>{await v(),await g();try{const t=e.params.slug;i.value&&i.value.overview&&"public"===i.value.visibility&&await(0,J.c7)(t)}catch(t){}R=setInterval(async()=>{try{const t=e.params.slug;let a;a=i.value&&i.value.overview?await(0,J.mb)(t):await(0,J.lr)(t),i.value&&(i.value.stats||(i.value.stats={views:0,likes:0}),i.value.stats.views=a.views,i.value.stats.likes=a.likes)}catch(t){}},15e3)}),(0,n.hi)(()=>{R&&clearInterval(R)}),{trip:i,comments:l,loading:s,tripConfig:o,isAdmin:u,isPlaying:r,audioPlayer:c,musicSrc:d,commentSectionRef:L,handleLike:b,handleSubmitComment:k,handleDeleteComment:y,handleAddImage:f,handleUpdateComment:h,handleSubmitReply:C,handleLoadReplies:w,goBack:_,toggleMusic:E,scrollToComments:I,getAvatarUrl:te.TW,isAuthor:p}}};const jt=(0,ue.A)(Jt,[["render",N],["__scopeId","data-v-c15395dc"]]);var Ot=jt}}]);
//# sourceMappingURL=672.ac36390f.js.map