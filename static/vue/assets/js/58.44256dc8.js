"use strict";(self["webpackChunkroamio_web"]=self["webpackChunkroamio_web"]||[]).push([[58],{485:function(a,s,t){t.d(s,{B:function(){return i},Yf:function(){return n},jw:function(){return l},nN:function(){return r}});var e=t(7277);const n=a=>e.A.get("/trips/",{params:a}),i=async a=>{try{return await e.A.get(`/trip-plans/${a}/`)}catch(s){const t=s.response?.status||s.status,n=404===t||"ERR_BAD_REQUEST"===s.code||s.message?.includes("404")||!s.response;if(n)return await e.A.get(`/trips/${a}/`);throw s}},r=a=>e.A.post(`/trips/${a}/like/`),l=a=>e.A.post(`/trips/${a}/checkin/`)},1058:function(a,s,t){t.r(s),t.d(s,{default:function(){return E}});var e=t(6768),n=t(4232);const i={class:"trip-list-container"},r={key:0,class:"text-center py-5"},l={key:1,class:"vine-container"},o=["onClick"],c={class:"icon"},d={class:"info"},u={class:"trip-title"},v={class:"desc"},k={class:"stats"},p={class:"stat-item"},b={class:"stat-item"},g={class:"stat-item"};function m(a,s,t,m,L,f){const w=(0,e.g2)("NavBar");return(0,e.uX)(),(0,e.CE)("div",i,[(0,e.bF)(w),s[3]||(s[3]=(0,e.Lk)("div",{class:"main-header"},[(0,e.Lk)("h1",{class:"title"},"旅行主菜单")],-1)),s[4]||(s[4]=(0,e.Lk)("div",{class:"welcome"},[(0,e.eW)(" 欢迎来到旅行计划与交流平台！"),(0,e.Lk)("br"),(0,e.eW)(" 发现精彩行程，记录美好旅途，和朋友一起分享旅行故事。 ")],-1)),m.loading?((0,e.uX)(),(0,e.CE)("div",r,[...s[0]||(s[0]=[(0,e.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,e.Lk)("span",{class:"visually-hidden"},"加载中...")],-1)])])):((0,e.uX)(),(0,e.CE)("div",l,[s[1]||(s[1]=(0,e.Lk)("div",{class:"vine-line"},null,-1)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(m.trips,(a,s)=>((0,e.uX)(),(0,e.CE)("div",{key:a.slug,class:(0,n.C4)(["fruit",`fruit-${s+1}`]),onClick:s=>m.goToDetail(a.slug)},[(0,e.Lk)("span",c,(0,n.v_)(m.getIcon(s)),1),(0,e.Lk)("div",d,[(0,e.Lk)("div",u,(0,n.v_)(a.name),1),(0,e.Lk)("div",v,(0,n.v_)(a.description),1),(0,e.Lk)("div",k,[(0,e.Lk)("span",p,"👁️ "+(0,n.v_)(a.stats.views),1),(0,e.Lk)("span",b,"❤️ "+(0,n.v_)(a.stats.likes),1),(0,e.Lk)("span",g,"💬 "+(0,n.v_)(a.stats.comments_count),1)])])],10,o))),128)),s[2]||(s[2]=(0,e.Fv)('<div class="fruit fruit-coming-soon" style="pointer-events:none;" data-v-4694407a><span class="icon" data-v-4694407a>⏳</span><div class="info" data-v-4694407a><div class="trip-title" data-v-4694407a>敬请期待</div><div class="desc" data-v-4694407a>更多精彩行程即将上线，欢迎持续关注！</div><div class="date" data-v-4694407a>Coming soon...</div></div></div>',1))])),s[5]||(s[5]=(0,e.Lk)("div",{class:"footer"},[(0,e.eW)(" © 2025 旅行计划平台 | 旅行社区"),(0,e.Lk)("br"),(0,e.eW)(" 技术支持：Vue 3 + Django REST Framework ")],-1))])}t(4114);var L=t(144),f=t(8512),w=t(485),h=t(5824),y={name:"TripListView",components:{NavBar:h.A},setup(){const a=(0,f.rd)(),s=(0,L.KR)([]),t=(0,L.KR)(!0),n=async()=>{t.value=!0;try{const a=await(0,w.Yf)();s.value=a.results||a||[]}catch(a){console.error("获取旅行列表失败:",a)}finally{t.value=!1}},i=s=>{a.push(`/trip/${s}`)},r=a=>{const s=["🏖️","🌊","🏙️","🌄","🌇"];return s[a]||"🗺️"};return(0,e.sV)(()=>{n()}),{trips:s,loading:t,goToDetail:i,getIcon:r}}},_=t(1241);const C=(0,_.A)(y,[["render",m],["__scopeId","data-v-4694407a"]]);var E=C},5824:function(a,s,t){t.d(s,{A:function(){return _}});var e=t(6768),n=t(4232),i=t(5130);const r={class:"navbar navbar-expand-lg navbar-dark bg-primary shadow-sm sticky-top"},l={class:"container-fluid"},o={class:"collapse navbar-collapse",id:"navbarNav",style:{overflow:"visible"}},c={class:"navbar-nav me-auto"},d={class:"nav-item"},u={class:"nav-item"},v={class:"d-flex align-items-center"},k={key:0,class:"dropdown dropdown-end"},p={href:"#",class:"d-flex align-items-center text-white text-decoration-none dropdown-toggle user-dropdown-btn",id:"dropdownUser","data-bs-toggle":"dropdown","aria-expanded":"false"},b=["src"],g={class:"dropdown-menu dropdown-menu-end text-small","aria-labelledby":"dropdownUser"};function m(a,s,t,m,L,f){const w=(0,e.g2)("router-link");return(0,e.uX)(),(0,e.CE)("nav",r,[(0,e.Lk)("div",l,[(0,e.bF)(w,{to:"/",class:"navbar-brand"},{default:(0,e.k6)(()=>[...s[1]||(s[1]=[(0,e.Lk)("span",{class:"brand-text"},"Roamio",-1)])]),_:1}),s[9]||(s[9]=(0,e.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[(0,e.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,e.Lk)("div",o,[(0,e.Lk)("ul",c,[(0,e.Lk)("li",d,[(0,e.bF)(w,{to:"/",class:"nav-link"},{default:(0,e.k6)(()=>[...s[2]||(s[2]=[(0,e.Lk)("i",{class:"bi bi-house-door me-1"},null,-1),(0,e.eW)(" 旅行列表 ",-1)])]),_:1})]),(0,e.Lk)("li",u,[(0,e.bF)(w,{to:"/my-trips",class:"nav-link"},{default:(0,e.k6)(()=>[...s[3]||(s[3]=[(0,e.Lk)("i",{class:"bi bi-folder me-1"},null,-1),(0,e.eW)(" 我的旅行 ",-1)])]),_:1})])]),(0,e.Lk)("div",v,[m.isLoggedIn?((0,e.uX)(),(0,e.CE)("div",k,[(0,e.Lk)("a",p,[(0,e.Lk)("img",{src:m.avatar,alt:"avatar",width:"32",height:"32",class:"rounded-circle me-2"},null,8,b),(0,e.Lk)("span",null,(0,n.v_)(m.username),1)]),(0,e.Lk)("ul",g,[(0,e.Lk)("li",null,[(0,e.bF)(w,{to:"/user/center",class:"dropdown-item"},{default:(0,e.k6)(()=>[...s[4]||(s[4]=[(0,e.Lk)("i",{class:"bi bi-person me-2"},null,-1),(0,e.eW)("个人中心 ",-1)])]),_:1})]),s[6]||(s[6]=(0,e.Lk)("li",null,[(0,e.Lk)("hr",{class:"dropdown-divider"})],-1)),(0,e.Lk)("li",null,[(0,e.Lk)("a",{href:"#",class:"dropdown-item",onClick:s[0]||(s[0]=(0,i.D$)((...a)=>m.handleLogout&&m.handleLogout(...a),["prevent"]))},[...s[5]||(s[5]=[(0,e.Lk)("i",{class:"bi bi-box-arrow-right me-2"},null,-1),(0,e.eW)("退出登录 ",-1)])])])])])):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.bF)(w,{to:"/login",class:"btn btn-outline-light btn-sm me-2"},{default:(0,e.k6)(()=>[...s[7]||(s[7]=[(0,e.eW)(" 登录 ",-1)])]),_:1}),(0,e.bF)(w,{to:"/register",class:"btn btn-light btn-sm"},{default:(0,e.k6)(()=>[...s[8]||(s[8]=[(0,e.eW)(" 注册 ",-1)])]),_:1})],64))])])])])}t(4114);var L=t(8512),f=t(1516),w={name:"NavBar",setup(){const a=(0,L.rd)(),s=(0,f.k)(),t=(0,e.EW)(()=>s.isLoggedIn),n=(0,e.EW)(()=>s.username),i=(0,e.EW)(()=>s.avatar),r=async()=>{if(confirm("确定要退出登录吗？"))try{await s.logout(),a.push("/login")}catch(t){console.error("退出失败:",t)}};return{isLoggedIn:t,username:n,avatar:i,handleLogout:r}}},h=t(1241);const y=(0,h.A)(w,[["render",m],["__scopeId","data-v-8cff0656"]]);var _=y}}]);
//# sourceMappingURL=58.44256dc8.js.map