"use strict";(self["webpackChunkroamio_web"]=self["webpackChunkroamio_web"]||[]).push([[980],{9980:function(e,s,a){a.r(s),a.d(s,{default:function(){return U}});var r=a(6768),l=a(4232),o=a(5130);const t={class:"register-container"},d={class:"container py-5"},i={class:"row justify-content-center"},u={class:"col-md-6 col-lg-5"},n={class:"card shadow"},m={class:"card-body p-5"},c={key:0,class:"alert alert-danger"},p={key:1,class:"alert alert-success"},v={class:"mb-3"},b=["disabled"],w={key:0,class:"text-danger small mt-1"},k={class:"mb-3"},f=["disabled"],g={key:0,class:"text-danger small mt-1"},y={class:"mb-3"},L=["disabled"],h={key:0,class:"text-danger small mt-1"},_={class:"mb-4"},x=["disabled"],C={key:0,class:"text-danger small mt-1"},D=["disabled"],A={key:0,class:"spinner-border spinner-border-sm me-2"},R={class:"text-center"};function E(e,s,a,E,X,Q){const M=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",t,[(0,r.Lk)("div",d,[(0,r.Lk)("div",i,[(0,r.Lk)("div",u,[(0,r.Lk)("div",n,[(0,r.Lk)("div",m,[s[12]||(s[12]=(0,r.Lk)("h2",{class:"text-center mb-4"},"用户注册",-1)),E.errorMessage?((0,r.uX)(),(0,r.CE)("div",c,(0,l.v_)(E.errorMessage),1)):(0,r.Q3)("",!0),E.successMessage?((0,r.uX)(),(0,r.CE)("div",p,(0,l.v_)(E.successMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:s[4]||(s[4]=(0,o.D$)((...e)=>E.handleRegister&&E.handleRegister(...e),["prevent"]))},[(0,r.Lk)("div",v,[s[5]||(s[5]=(0,r.Lk)("label",{for:"username",class:"form-label"},"用户名",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":s[0]||(s[0]=e=>E.formData.username=e),required:"",disabled:E.submitting,placeholder:"请输入用户名"},null,8,b),[[o.Jo,E.formData.username]]),E.errors.username?((0,r.uX)(),(0,r.CE)("div",w,(0,l.v_)(E.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",k,[s[6]||(s[6]=(0,r.Lk)("label",{for:"email",class:"form-label"},"邮箱（可选）",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":s[1]||(s[1]=e=>E.formData.email=e),disabled:E.submitting,placeholder:"请输入邮箱"},null,8,f),[[o.Jo,E.formData.email]]),E.errors.email?((0,r.uX)(),(0,r.CE)("div",g,(0,l.v_)(E.errors.email),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",y,[s[7]||(s[7]=(0,r.Lk)("label",{for:"password",class:"form-label"},"密码",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":s[2]||(s[2]=e=>E.formData.password=e),required:"",disabled:E.submitting,placeholder:"请输入密码"},null,8,L),[[o.Jo,E.formData.password]]),E.errors.password?((0,r.uX)(),(0,r.CE)("div",h,(0,l.v_)(E.errors.password),1)):(0,r.Q3)("",!0),s[8]||(s[8]=(0,r.Lk)("small",{class:"text-muted"}," 密码至少8位，包含字母和数字 ",-1))]),(0,r.Lk)("div",_,[s[9]||(s[9]=(0,r.Lk)("label",{for:"password2",class:"form-label"},"确认密码",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control",id:"password2","onUpdate:modelValue":s[3]||(s[3]=e=>E.formData.password2=e),required:"",disabled:E.submitting,placeholder:"请再次输入密码"},null,8,x),[[o.Jo,E.formData.password2]]),E.errors.password2?((0,r.uX)(),(0,r.CE)("div",C,(0,l.v_)(E.errors.password2),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary w-100 mb-3",disabled:E.submitting},[E.submitting?((0,r.uX)(),(0,r.CE)("span",A)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,l.v_)(E.submitting?"注册中...":"注册"),1)],8,D),(0,r.Lk)("div",R,[s[11]||(s[11]=(0,r.Lk)("span",{class:"text-muted"},"已有账号？",-1)),(0,r.bF)(M,{to:"/login",class:"text-decoration-none"},{default:(0,r.k6)(()=>[...s[10]||(s[10]=[(0,r.eW)(" 立即登录 ",-1)])]),_:1})])],32)])])])])])])}a(4114);var X=a(144),Q=a(8512),M=a(1516),K={name:"RegisterView",setup(){const e=(0,Q.rd)(),s=(0,M.k)(),a=(0,X.KR)({username:"",email:"",password:"",password2:""}),r=(0,X.KR)({}),l=(0,X.KR)(""),o=(0,X.KR)(""),t=(0,X.KR)(!1),d=()=>(r.value={},a.value.username?a.value.username.length<3?(r.value.username="用户名至少3个字符",!1):a.value.password?a.value.password.length<8?(r.value.password="密码至少8位",!1):a.value.password2?a.value.password===a.value.password2||(r.value.password2="两次密码不一致",!1):(r.value.password2="请再次输入密码",!1):(r.value.password="请输入密码",!1):(r.value.username="请输入用户名",!1)),i=async()=>{if(l.value="",o.value="",d()){t.value=!0;try{await s.register({username:a.value.username,email:a.value.email||void 0,password:a.value.password,password2:a.value.password2}),o.value="注册成功！正在跳转...",setTimeout(()=>{e.push("/")},2e3)}catch(i){if(console.error("注册失败:",i),i.response?.data){const e=i.response.data;"object"===typeof e?(e.username&&(r.value.username=Array.isArray(e.username)?e.username[0]:e.username),e.email&&(r.value.email=Array.isArray(e.email)?e.email[0]:e.email),e.password&&(r.value.password=Array.isArray(e.password)?e.password[0]:e.password),e.password2&&(r.value.password2=Array.isArray(e.password2)?e.password2[0]:e.password2),(e.detail||e.message||e.error)&&(l.value=e.detail||e.message||e.error)):l.value="注册失败，请稍后重试"}else l.value="网络错误，请检查网络连接"}finally{t.value=!1}}};return{formData:a,errors:r,errorMessage:l,successMessage:o,submitting:t,handleRegister:i}}},V=a(1241);const J=(0,V.A)(K,[["render",E],["__scopeId","data-v-7bb54761"]]);var U=J}}]);
//# sourceMappingURL=980.442388c5.js.map