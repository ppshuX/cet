"use strict";(self["webpackChunkroamio_web"]=self["webpackChunkroamio_web"]||[]).push([[974],{5974:function(e,a,l){l.r(a),l.d(a,{default:function(){return Be}});var s=l(6768),t=l(4232),i=l(5130);const n={class:"user-center-wrapper"},r={class:"user-center-container"},o={class:"container py-5"},c={key:0,class:"text-center py-5"},d={key:1,class:"row"},u={class:"col-md-4 mb-4"},v={class:"card shadow-sm"},b={class:"card-body text-center p-4"},m={class:"avatar-container mb-3"},p=["src"],k={class:"username-display mb-1"},g={class:"email-display mb-3"},f={class:"mb-3 d-flex gap-2 justify-content-center align-items-center"},L={key:0,class:"badge bg-danger"},h={key:1,class:"badge bg-primary"},y={class:"text-muted"},w={class:"card shadow-sm mt-3"},_={class:"card-body"},E={class:"row text-center"},C={class:"col-12 mb-3"},x={class:"stat-box-small"},A={class:"text-primary mb-1"},D={class:"col-6 mb-3"},X={class:"stat-box-small"},I={class:"text-success mb-1"},F={class:"col-6 mb-3"},U={class:"stat-box-small"},W={class:"text-warning mb-1"},P=["disabled"],B={key:0,class:"spinner-border spinner-border-sm me-2"},K=["disabled"],R={class:"col-md-8"},V={class:"card shadow-sm mb-4"},N={class:"card-header bg-white d-flex justify-content-between align-items-center"},Q={class:"card-body"},$={key:0,class:"info-display"},J={class:"info-card mb-3"},j={class:"info-item"},S={class:"info-content"},T={class:"info-card"},z={class:"info-item"},M={class:"info-content"},q={class:"mb-3"},G=["disabled"],H={class:"mb-3"},O=["disabled"],Y={class:"d-flex gap-2"},Z=["disabled"],ee={key:0,class:"spinner-border spinner-border-sm me-2"},ae=["disabled"],le={class:"card shadow-sm mb-4"},se={class:"card-header bg-white d-flex justify-content-between align-items-center"},te={class:"card-body"},ie={class:"mb-3"},ne={key:0,class:"info-display"},re={class:"info-card mb-3"},oe={class:"info-content"},ce={class:"info-card mb-3"},de={key:0},ue={key:1,class:"info-content text-muted"},ve={class:"info-card"},be={class:"info-content"},me={class:"mb-3"},pe={class:"text-muted"},ke={class:"mb-3"},ge={class:"mb-3"},fe={class:"d-flex gap-2"},Le=["disabled"],he={key:0,class:"spinner-border spinner-border-sm me-2"},ye=["disabled"];function we(e,a,l,we,_e,Ee){const Ce=(0,s.g2)("NavBar");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(Ce),(0,s.Lk)("div",r,[(0,s.Lk)("button",{class:"back-btn",onClick:a[0]||(a[0]=(...e)=>we.goBack&&we.goBack(...e)),title:"è¿”å›é¦–é¡µ"}," ğŸ  "),(0,s.Lk)("div",o,[a[39]||(a[39]=(0,s.Lk)("h2",{class:"mb-4"},"ä¸ªäººä¸­å¿ƒ",-1)),we.loading?((0,s.uX)(),(0,s.CE)("div",c,[...a[17]||(a[17]=[(0,s.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,s.Lk)("span",{class:"visually-hidden"},"åŠ è½½ä¸­...")],-1)])])):((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("div",u,[(0,s.Lk)("div",v,[(0,s.Lk)("div",b,[(0,s.Lk)("div",m,[(0,s.Lk)("img",{src:we.userAvatar,alt:"å¤´åƒ",class:"rounded-circle",width:"120",height:"120"},null,8,p),(0,s.Lk)("button",{class:"btn btn-sm btn-light avatar-upload-btn",onClick:a[1]||(a[1]=(...e)=>we.triggerFileInput&&we.triggerFileInput(...e))},[...a[18]||(a[18]=[(0,s.Lk)("i",{class:"bi bi-camera"},null,-1)])]),(0,s.Lk)("input",{ref:"avatarInput",type:"file",accept:"image/*",style:{display:"none"},onChange:a[2]||(a[2]=(...e)=>we.handleAvatarChange&&we.handleAvatarChange(...e))},null,544)]),(0,s.Lk)("h4",k,(0,t.v_)(we.username),1),(0,s.Lk)("p",g,(0,t.v_)(we.email||"æœªè®¾ç½®é‚®ç®±"),1),(0,s.Lk)("div",f,[we.isAdmin?((0,s.uX)(),(0,s.CE)("span",L,"ç®¡ç†å‘˜")):((0,s.uX)(),(0,s.CE)("span",h,"æ™®é€šç”¨æˆ·")),(0,s.Lk)("span",{class:(0,t.C4)("badge level-badge-small "+we.getLevelClass(we.profileData.level))},(0,t.v_)(we.getLevelText(we.profileData.level)),3)]),(0,s.Lk)("small",y," æ³¨å†Œæ—¶é—´ï¼š"+(0,t.v_)(we.formatDate(we.userInfo?.date_joined)),1)])]),(0,s.Lk)("div",w,[a[22]||(a[22]=(0,s.Lk)("div",{class:"card-header bg-white"},[(0,s.Lk)("h5",{class:"mb-0"},"ğŸ“Š æˆ‘çš„ç»Ÿè®¡")],-1)),(0,s.Lk)("div",_,[(0,s.Lk)("div",E,[(0,s.Lk)("div",C,[(0,s.Lk)("div",x,[(0,s.Lk)("h4",A,(0,t.v_)(we.stats.comments_count||0),1),a[19]||(a[19]=(0,s.Lk)("p",{class:"text-muted mb-0 small"},"è¯„è®ºæ•°",-1))])]),(0,s.Lk)("div",D,[(0,s.Lk)("div",X,[(0,s.Lk)("h4",I,(0,t.v_)(we.stats.trips_count||0),1),a[20]||(a[20]=(0,s.Lk)("p",{class:"text-muted mb-0 small"},"æ—…è¡Œæ•°",-1))])]),(0,s.Lk)("div",F,[(0,s.Lk)("div",U,[(0,s.Lk)("h4",W,(0,t.v_)(we.stats.public_trips_count||0),1),a[21]||(a[21]=(0,s.Lk)("p",{class:"text-muted mb-0 small"},"å…¬å¼€æ—…è¡Œ",-1))])])])])]),we.isEditingBasic||we.isEditingProfile?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("button",{class:"btn btn-success w-100 mt-3",onClick:a[4]||(a[4]=(...e)=>we.saveAllChanges&&we.saveAllChanges(...e)),disabled:we.savingAll},[we.savingAll?((0,s.uX)(),(0,s.CE)("span",B)):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,t.v_)(we.savingAll?"ä¿å­˜ä¸­...":"ğŸ’¾ ä¿å­˜æ‰€æœ‰æ›´æ”¹"),1)],8,P),(0,s.Lk)("button",{class:"btn btn-outline-secondary w-100 mt-2",onClick:a[5]||(a[5]=(...e)=>we.cancelAllEdit&&we.cancelAllEdit(...e)),disabled:we.savingAll}," å–æ¶ˆç¼–è¾‘ ",8,K)],64)):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-primary w-100 mt-3",onClick:a[3]||(a[3]=(...e)=>we.startEditing&&we.startEditing(...e))}," âœï¸ ç¼–è¾‘ä¸ªäººä¸­å¿ƒ "))]),(0,s.Lk)("div",R,[(0,s.Lk)("div",V,[(0,s.Lk)("div",N,[a[23]||(a[23]=(0,s.Lk)("h5",{class:"mb-0"},"åŸºæœ¬ä¿¡æ¯",-1)),we.isEditingBasic?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-sm btn-outline-primary",onClick:a[6]||(a[6]=e=>we.isEditingBasic=!0)}," âœï¸ ç¼–è¾‘ "))]),(0,s.Lk)("div",Q,[we.isEditingBasic?((0,s.uX)(),(0,s.CE)("form",{key:1,onSubmit:a[10]||(a[10]=(0,i.D$)((...e)=>we.handleUpdateInfo&&we.handleUpdateInfo(...e),["prevent"]))},[(0,s.Lk)("div",q,[a[26]||(a[26]=(0,s.Lk)("label",{class:"form-label"},"ç”¨æˆ·å",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[7]||(a[7]=e=>we.editForm.username=e),disabled:we.updating},null,8,G),[[i.Jo,we.editForm.username]])]),(0,s.Lk)("div",H,[a[27]||(a[27]=(0,s.Lk)("label",{class:"form-label"},"é‚®ç®±",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":a[8]||(a[8]=e=>we.editForm.email=e),disabled:we.updating},null,8,O),[[i.Jo,we.editForm.email]])]),(0,s.Lk)("div",Y,[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:we.updating},[we.updating?((0,s.uX)(),(0,s.CE)("span",ee)):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,t.v_)(we.updating?"ä¿å­˜ä¸­...":"ğŸ’¾ ä¿å­˜"),1)],8,Z),(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[9]||(a[9]=(...e)=>we.cancelBasicEdit&&we.cancelBasicEdit(...e)),disabled:we.updating}," å–æ¶ˆ ",8,ae)])],32)):((0,s.uX)(),(0,s.CE)("div",$,[(0,s.Lk)("div",J,[(0,s.Lk)("div",j,[a[24]||(a[24]=(0,s.Lk)("label",{class:"info-label"},"ç”¨æˆ·å",-1)),(0,s.Lk)("p",S,(0,t.v_)(we.editForm.username),1)])]),(0,s.Lk)("div",T,[(0,s.Lk)("div",z,[a[25]||(a[25]=(0,s.Lk)("label",{class:"info-label"},"é‚®ç®±",-1)),(0,s.Lk)("p",M,(0,t.v_)(we.editForm.email||"æœªè®¾ç½®"),1)])])]))])]),(0,s.Lk)("div",le,[(0,s.Lk)("div",se,[a[28]||(a[28]=(0,s.Lk)("h5",{class:"mb-0"},"âœ¨ æ—…è¡Œè€…èµ„æ–™",-1)),we.isEditingProfile?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-sm btn-outline-primary",onClick:a[11]||(a[11]=e=>we.isEditingProfile=!0)}," âœï¸ ç¼–è¾‘ "))]),(0,s.Lk)("div",te,[(0,s.Lk)("div",ie,[a[29]||(a[29]=(0,s.Lk)("label",{class:"form-label"},"ğŸ–ï¸ å½“å‰ç­‰çº§",-1)),(0,s.Lk)("div",null,[(0,s.Lk)("span",{class:(0,t.C4)("badge level-badge "+we.getLevelClass(we.profileData.level))},(0,t.v_)(we.getLevelText(we.profileData.level)),3)]),a[30]||(a[30]=(0,s.Lk)("small",{class:"text-muted"},"æ ¹æ®æ—…è¡Œå’Œè¯„è®ºæ•°é‡è‡ªåŠ¨è®¡ç®—",-1))]),we.isEditingProfile?((0,s.uX)(),(0,s.CE)("form",{key:1,onSubmit:a[16]||(a[16]=(0,i.D$)((...e)=>we.handleUpdateProfile&&we.handleUpdateProfile(...e),["prevent"]))},[(0,s.Lk)("div",me,[a[34]||(a[34]=(0,s.Lk)("label",{class:"form-label"},"ğŸ“ ä¸ªäººç®€ä»‹",-1)),(0,s.bo)((0,s.Lk)("textarea",{class:"form-control","onUpdate:modelValue":a[12]||(a[12]=e=>we.profileData.bio=e),rows:"4",maxlength:"500",placeholder:"ä»‹ç»ä¸€ä¸‹è‡ªå·±å§..."},null,512),[[i.Jo,we.profileData.bio]]),(0,s.Lk)("small",pe,(0,t.v_)(we.profileData.bio?.length||0)+"/500",1)]),(0,s.Lk)("div",ke,[a[35]||(a[35]=(0,s.Lk)("label",{class:"form-label"},"ğŸ·ï¸ ä¸ªäººæ ‡ç­¾",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[13]||(a[13]=e=>we.profileData.tags=e),placeholder:"ä¾‹å¦‚ï¼šæ‘„å½±çˆ±å¥½è€…,ç¾é£Ÿè¾¾äºº,æˆ·å¤–è¿åŠ¨",maxlength:"200"},null,512),[[i.Jo,we.profileData.tags]]),a[36]||(a[36]=(0,s.Lk)("small",{class:"text-muted"},"é€—å·åˆ†éš”ï¼Œæœ€å¤š10ä¸ªæ ‡ç­¾ï¼Œæ¯ä¸ªä¸è¶…è¿‡20å­—",-1))]),(0,s.Lk)("div",ge,[a[37]||(a[37]=(0,s.Lk)("label",{class:"form-label"},"ğŸŒ è®¿é—®è¿‡çš„å›½å®¶",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[14]||(a[14]=e=>we.profileData.visited_countries=e),placeholder:"ä¾‹å¦‚ï¼šä¸­å›½,æ—¥æœ¬,æ³°å›½",maxlength:"200"},null,512),[[i.Jo,we.profileData.visited_countries]]),a[38]||(a[38]=(0,s.Lk)("small",{class:"text-muted"},"é€—å·åˆ†éš”çš„å›½å®¶åˆ—è¡¨",-1))]),(0,s.Lk)("div",fe,[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:we.updatingProfile},[we.updatingProfile?((0,s.uX)(),(0,s.CE)("span",he)):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,t.v_)(we.updatingProfile?"ä¿å­˜ä¸­...":"ğŸ’¾ ä¿å­˜"),1)],8,Le),(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[15]||(a[15]=(...e)=>we.cancelProfileEdit&&we.cancelProfileEdit(...e)),disabled:we.updatingProfile}," å–æ¶ˆ ",8,ye)])],32)):((0,s.uX)(),(0,s.CE)("div",ne,[(0,s.Lk)("div",re,[a[31]||(a[31]=(0,s.Lk)("label",{class:"info-label"},"ğŸ“ ä¸ªäººç®€ä»‹",-1)),(0,s.Lk)("p",oe,(0,t.v_)(we.profileData.bio||"è¿˜æ²¡æœ‰å†™ä¸ªäººç®€ä»‹"),1)]),(0,s.Lk)("div",ce,[a[32]||(a[32]=(0,s.Lk)("label",{class:"info-label"},"ğŸ·ï¸ ä¸ªäººæ ‡ç­¾",-1)),we.profileData.tags?((0,s.uX)(),(0,s.CE)("div",de,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(we.profileData.tags.split(","),(e,a)=>((0,s.uX)(),(0,s.CE)("span",{key:a,class:"badge bg-light text-dark me-1"},(0,t.v_)(e.trim()),1))),128))])):((0,s.uX)(),(0,s.CE)("p",ue,"è¿˜æ²¡æœ‰æ·»åŠ æ ‡ç­¾"))]),(0,s.Lk)("div",ve,[a[33]||(a[33]=(0,s.Lk)("label",{class:"info-label"},"ğŸŒ è®¿é—®è¿‡çš„å›½å®¶",-1)),(0,s.Lk)("p",be,(0,t.v_)(we.profileData.visited_countries||"è¿˜æ²¡æœ‰è®°å½•"),1)])]))])])])]))])])])}l(4114);var _e=l(144),Ee=l(8512),Ce=l(1516),xe=l(7277);const Ae=(e,a)=>xe.A.patch(`/users/${e}/`,a),De=(e,a)=>{const l=new FormData;return l.append("avatar",a),xe.A.post(`/users/${e}/upload_avatar/`,l)},Xe=e=>xe.A.patch("/users/update_profile/",e),Ie=e=>xe.A.get(`/users/${e}/stats/`);var Fe=l(9814),Ue={name:"UserCenterView",components:{NavBar:Fe.A},setup(){const e=(0,Ee.rd)(),a=(0,Ce.k)(),l=(0,_e.KR)(!1),t=(0,_e.KR)(!1),i=(0,_e.KR)(!1),n=(0,_e.KR)(!1),r=(0,_e.KR)(!1),o=(0,_e.KR)(!1),c=(0,_e.KR)({comments_count:0,trips_count:0,public_trips_count:0}),d=(0,_e.KR)(null),u=(0,_e.KR)({username:"",email:""}),v=(0,_e.KR)({username:"",email:""}),b=(0,_e.KR)({bio:"",tags:"",visited_countries:"",level:"novice"}),m=(0,_e.KR)({bio:"",tags:"",visited_countries:"",level:"novice"}),p=(0,s.EW)(()=>a.userInfo),k=(0,s.EW)(()=>a.username),g=(0,s.EW)(()=>p.value?.email),f=(0,s.EW)(()=>a.isAdmin),L=(0,s.EW)(()=>a.avatar),h=e=>{if(!e)return"æœªçŸ¥";const a=new Date(e);return a.toLocaleDateString("zh-CN")},y=async()=>{if(p.value?.id)try{const e=await Ie(p.value.id);c.value=e}catch(e){console.error("åŠ è½½ç»Ÿè®¡å¤±è´¥:",e)}},w=()=>{const e=p.value?.username||"",a=p.value?.email||"";u.value={username:e,email:a},v.value={username:e,email:a};const l=p.value?.profile?.bio||"",s=p.value?.profile?.tags||"",t=p.value?.profile?.visited_countries||"",i=p.value?.profile?.level||"novice";b.value={bio:l,tags:s,visited_countries:t,level:i},m.value={bio:l,tags:s,visited_countries:t,level:i}},_=()=>{u.value={...v.value},r.value=!1},E=()=>{b.value={...m.value},o.value=!1},C=()=>{r.value=!0,o.value=!0},x=()=>{_(),E()},A=async()=>{n.value=!0;try{u.value.username===v.value.username&&u.value.email===v.value.email||await Ae(p.value.id,u.value),b.value.bio===m.value.bio&&b.value.tags===m.value.tags&&b.value.visited_countries===m.value.visited_countries||await Xe({bio:b.value.bio,tags:b.value.tags,visited_countries:b.value.visited_countries}),await a.fetchUserInfo(),w(),alert("æ‰€æœ‰æ›´æ”¹å·²ä¿å­˜ï¼")}catch(e){console.error("ä¿å­˜å¤±è´¥:",e),alert("ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{n.value=!1}},D=e=>{const a={novice:"æ–°æ‰‹",explorer:"æ¢ç´¢è€…",wanderer:"æ¼«æ¸¸è€…",adventurer:"å†’é™©å®¶",master:"æ—…è¡Œå¤§å¸ˆ"};return a[e]||"æ–°æ‰‹"},X=e=>{const a={novice:"level-novice",explorer:"level-explorer",wanderer:"level-wanderer",adventurer:"level-adventurer",master:"level-master"};return a[e]||"level-novice"},I=async()=>{i.value=!0;try{await Xe({bio:b.value.bio,tags:b.value.tags,visited_countries:b.value.visited_countries}),await a.fetchUserInfo(),w(),alert("èµ„æ–™æ›´æ–°æˆåŠŸï¼")}catch(e){console.error("æ›´æ–°å¤±è´¥:",e),alert("æ›´æ–°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{i.value=!1}},F=async()=>{t.value=!0;try{await Ae(p.value.id,u.value),await a.fetchUserInfo(),w(),r.value=!1,alert("æ›´æ–°æˆåŠŸï¼")}catch(e){console.error("æ›´æ–°å¤±è´¥:",e),alert("æ›´æ–°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{t.value=!1}},U=()=>{d.value?.click()},W=async e=>{const l=e.target.files?.[0];if(l)if(l.type.startsWith("image/"))if(l.size>5242880)alert("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MB");else try{await De(p.value.id,l),await a.fetchUserInfo(),alert("å¤´åƒä¸Šä¼ æˆåŠŸï¼")}catch(s){console.error("å¤´åƒä¸Šä¼ å¤±è´¥:",s),alert("å¤´åƒä¸Šä¼ å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}else alert("è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶")},P=()=>{e.push("/")},B=async()=>{if(confirm("ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ"))try{await a.logout(),e.push("/login")}catch(l){console.error("é€€å‡ºå¤±è´¥:",l)}};return(0,s.sV)(async()=>{if(a.isLoggedIn){l.value=!0;try{await y(),w()}catch(s){console.error("åŠ è½½å¤±è´¥:",s)}finally{l.value=!1}}else e.push("/login")}),{loading:l,updating:t,updatingProfile:i,savingAll:n,isEditingBasic:r,isEditingProfile:o,stats:c,avatarInput:d,editForm:u,profileData:b,userInfo:p,username:k,email:g,isAdmin:f,userAvatar:L,formatDate:h,goBack:P,handleUpdateInfo:F,handleUpdateProfile:I,cancelBasicEdit:_,cancelProfileEdit:E,startEditing:C,cancelAllEdit:x,saveAllChanges:A,getLevelText:D,getLevelClass:X,triggerFileInput:U,handleAvatarChange:W,handleLogout:B}}},We=l(1241);const Pe=(0,We.A)(Ue,[["render",we],["__scopeId","data-v-81ef2678"]]);var Be=Pe},9814:function(e,a,l){l.d(a,{A:function(){return _}});var s=l(6768),t=l(4232),i=l(5130);const n={class:"navbar navbar-expand-lg navbar-dark bg-primary shadow-sm sticky-top"},r={class:"container-fluid"},o={class:"collapse navbar-collapse",id:"navbarNav",style:{overflow:"visible"}},c={class:"navbar-nav me-auto"},d={class:"nav-item"},u={key:0,class:"nav-item"},v={class:"d-flex align-items-center"},b={key:0,class:"dropdown dropdown-end"},m={href:"#",class:"d-flex align-items-center text-white text-decoration-none dropdown-toggle user-dropdown-btn",id:"dropdownUser","data-bs-toggle":"dropdown","aria-expanded":"false"},p=["src"],k={class:"dropdown-menu dropdown-menu-end text-small","aria-labelledby":"dropdownUser"};function g(e,a,l,g,f,L){const h=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",n,[(0,s.Lk)("div",r,[(0,s.bF)(h,{to:"/",class:"navbar-brand"},{default:(0,s.k6)(()=>[...a[1]||(a[1]=[(0,s.Lk)("span",{class:"brand-text"},"Roamio",-1)])]),_:1}),a[9]||(a[9]=(0,s.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[(0,s.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,s.Lk)("div",o,[(0,s.Lk)("ul",c,[(0,s.Lk)("li",d,[(0,s.bF)(h,{to:"/",class:"nav-link"},{default:(0,s.k6)(()=>[...a[2]||(a[2]=[(0,s.Lk)("i",{class:"bi bi-house-door me-1"},null,-1),(0,s.eW)(" æ—…è¡Œåˆ—è¡¨ ",-1)])]),_:1})]),g.isLoggedIn?((0,s.uX)(),(0,s.CE)("li",u,[(0,s.bF)(h,{to:"/my-trips/",class:"nav-link"},{default:(0,s.k6)(()=>[...a[3]||(a[3]=[(0,s.Lk)("i",{class:"bi bi-folder me-1"},null,-1),(0,s.eW)(" æˆ‘çš„æ—…è¡Œ ",-1)])]),_:1})])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",v,[g.isLoggedIn?((0,s.uX)(),(0,s.CE)("div",b,[(0,s.Lk)("a",m,[(0,s.Lk)("img",{src:g.avatar,alt:"avatar",width:"32",height:"32",class:"rounded-circle me-2"},null,8,p),(0,s.Lk)("span",null,(0,t.v_)(g.username),1)]),(0,s.Lk)("ul",k,[(0,s.Lk)("li",null,[(0,s.bF)(h,{to:"/user/center",class:"dropdown-item"},{default:(0,s.k6)(()=>[...a[4]||(a[4]=[(0,s.Lk)("i",{class:"bi bi-person me-2"},null,-1),(0,s.eW)("ä¸ªäººä¸­å¿ƒ ",-1)])]),_:1})]),a[6]||(a[6]=(0,s.Lk)("li",null,[(0,s.Lk)("hr",{class:"dropdown-divider"})],-1)),(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#",class:"dropdown-item",onClick:a[0]||(a[0]=(0,i.D$)((...e)=>g.handleLogout&&g.handleLogout(...e),["prevent"]))},[...a[5]||(a[5]=[(0,s.Lk)("i",{class:"bi bi-box-arrow-right me-2"},null,-1),(0,s.eW)("é€€å‡ºç™»å½• ",-1)])])])])])):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.bF)(h,{to:"/login",class:"btn btn-outline-light btn-sm me-2"},{default:(0,s.k6)(()=>[...a[7]||(a[7]=[(0,s.eW)(" ç™»å½• ",-1)])]),_:1}),(0,s.bF)(h,{to:"/register",class:"btn btn-light btn-sm"},{default:(0,s.k6)(()=>[...a[8]||(a[8]=[(0,s.eW)(" æ³¨å†Œ ",-1)])]),_:1})],64))])])])])}l(4114);var f=l(8512),L=l(1516),h={name:"NavBar",setup(){const e=(0,f.rd)(),a=(0,L.k)(),l=(0,s.EW)(()=>a.isLoggedIn),t=(0,s.EW)(()=>a.username),i=(0,s.EW)(()=>a.avatar),n=async()=>{if(confirm("ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ"))try{await a.logout(),e.push("/login")}catch(l){console.error("é€€å‡ºå¤±è´¥:",l)}};return{isLoggedIn:l,username:t,avatar:i,handleLogout:n}}},y=l(1241);const w=(0,y.A)(h,[["render",g],["__scopeId","data-v-7d3c81b6"]]);var _=w}}]);
//# sourceMappingURL=974.9a7dfd1d.js.map