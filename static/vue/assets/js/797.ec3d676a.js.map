{"version":3,"file":"assets/js/797.ec3d676a.js","mappings":"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","sources":["webpack://roamio-web/./src/components/NavBar.vue","webpack://roamio-web/./src/components/NavBar.vue?01fd","webpack://roamio-web/./src/views/auth/LoginView.vue","webpack://roamio-web/./src/views/auth/LoginView.vue?4511"],"sourcesContent":["<template>\r\n  <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary shadow-sm sticky-top\">\r\n    <div class=\"container-fluid\">\r\n      <!-- Logo -->\r\n      <router-link to=\"/\" class=\"navbar-brand\">\r\n        <span class=\"brand-text\">Roamio</span>\r\n      </router-link>\r\n      \r\n      <!-- Toggle按钮（移动端） -->\r\n      <button\r\n        class=\"navbar-toggler\"\r\n        type=\"button\"\r\n        data-bs-toggle=\"collapse\"\r\n        data-bs-target=\"#navbarNav\"\r\n      >\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      \r\n    <!-- 导航项 -->\r\n    <div class=\"collapse navbar-collapse\" id=\"navbarNav\" style=\"overflow: visible;\">\r\n        <ul class=\"navbar-nav me-auto\">\r\n          <li class=\"nav-item\">\r\n            <router-link to=\"/\" class=\"nav-link\">\r\n              <i class=\"bi bi-house-door me-1\"></i>\r\n              旅行大厅\r\n            </router-link>\r\n          </li>\r\n          <li v-if=\"isLoggedIn\" class=\"nav-item\">\r\n            <router-link to=\"/my-trips/\" class=\"nav-link\">\r\n              <i class=\"bi bi-folder me-1\"></i>\r\n              我的旅行\r\n            </router-link>\r\n          </li>\r\n        </ul>\r\n        \r\n        <!-- 右侧用户信息 -->\r\n        <div class=\"d-flex align-items-center\">\r\n          <!-- 已登录 -->\r\n          <template v-if=\"isLoggedIn\">\r\n            <div class=\"dropdown dropdown-end\">\r\n              <a\r\n                href=\"#\"\r\n                class=\"d-flex align-items-center text-white text-decoration-none dropdown-toggle user-dropdown-btn\"\r\n                id=\"dropdownUser\"\r\n                data-bs-toggle=\"dropdown\"\r\n                aria-expanded=\"false\"\r\n              >\r\n                <img\r\n                  :src=\"avatar\"\r\n                  alt=\"avatar\"\r\n                  width=\"32\"\r\n                  height=\"32\"\r\n                  class=\"rounded-circle me-2\"\r\n                />\r\n                <span>{{ username }}</span>\r\n              </a>\r\n              <ul class=\"dropdown-menu dropdown-menu-end text-small\" aria-labelledby=\"dropdownUser\">\r\n                <li>\r\n                  <router-link to=\"/user/center\" class=\"dropdown-item\">\r\n                    <i class=\"bi bi-person me-2\"></i>个人中心\r\n                  </router-link>\r\n                </li>\r\n                <li><hr class=\"dropdown-divider\" /></li>\r\n                <li>\r\n                  <a href=\"#\" class=\"dropdown-item\" @click.prevent=\"handleLogout\">\r\n                    <i class=\"bi bi-box-arrow-right me-2\"></i>退出登录\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </template>\r\n          \r\n          <!-- 未登录 -->\r\n          <template v-else>\r\n            <router-link to=\"/login\" class=\"btn btn-outline-light btn-sm me-2\">\r\n              登录\r\n            </router-link>\r\n            <router-link to=\"/register\" class=\"btn btn-light btn-sm\">\r\n              注册\r\n            </router-link>\r\n          </template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useUserStore } from '@/stores'\r\n\r\nexport default {\r\n  name: 'NavBar',\r\n  \r\n  setup() {\r\n    const router = useRouter()\r\n    const userStore = useUserStore()\r\n    \r\n    const isLoggedIn = computed(() => userStore.isLoggedIn)\r\n    const username = computed(() => userStore.username)\r\n    const avatar = computed(() => userStore.avatar)\r\n    \r\n    const handleLogout = async () => {\r\n      if (!confirm('确定要退出登录吗？')) return\r\n      \r\n      try {\r\n        await userStore.logout()\r\n        router.push('/login')\r\n      } catch (error) {\r\n        console.error('退出失败:', error)\r\n      }\r\n    }\r\n    \r\n    return {\r\n      isLoggedIn,\r\n      username,\r\n      avatar,\r\n      handleLogout\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.navbar {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\r\n  border-bottom: none;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  padding: 1rem 0;\r\n}\r\n\r\n.navbar-brand {\r\n  font-size: 1.5rem;\r\n  font-weight: 800;\r\n  color: white !important;\r\n  text-decoration: none;\r\n  transition: all 0.3s ease;\r\n  letter-spacing: 2px;\r\n}\r\n\r\n.brand-text {\r\n  background: linear-gradient(45deg, #fff 0%, #f0f0f0 50%, #fff 100%);\r\n  background-size: 200% auto;\r\n  background-clip: text;\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  font-weight: 900;\r\n  font-size: 1.6rem;\r\n  letter-spacing: 3px;\r\n  text-shadow: 0 3px 8px rgba(255, 255, 255, 0.3);\r\n  animation: shimmer 3s infinite;\r\n}\r\n\r\n@keyframes shimmer {\r\n  0%, 100% {\r\n    background-position: 0% center;\r\n  }\r\n  50% {\r\n    background-position: 100% center;\r\n  }\r\n}\r\n\r\n.navbar-brand:hover .brand-text {\r\n  background-position: 100% center;\r\n  transform: scale(1.08);\r\n  filter: brightness(1.2);\r\n}\r\n\r\n.nav-link {\r\n  color: rgba(255, 255, 255, 0.95) !important;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n  border-radius: 8px;\r\n  padding: 0.5rem 1rem !important;\r\n}\r\n\r\n.nav-link:hover {\r\n  color: white !important;\r\n  background: rgba(255, 255, 255, 0.15);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.dropdown-menu {\r\n  min-width: 200px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\r\n  border: none;\r\n  margin-top: 0.5rem;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.dropdown-item {\r\n  padding: 0.75rem 1.25rem;\r\n  transition: all 0.2s ease;\r\n  border-radius: 8px;\r\n  margin: 0.2rem;\r\n}\r\n\r\n.dropdown-item:hover {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  transform: translateX(3px);\r\n}\r\n\r\n.dropdown {\r\n  position: relative;\r\n  z-index: 1050;\r\n}\r\n\r\n.user-dropdown-btn {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 25px;\r\n  padding: 0.5rem 1rem;\r\n  transition: all 0.3s ease;\r\n  white-space: nowrap;\r\n  max-width: 100%;\r\n  cursor: pointer;\r\n}\r\n\r\n.user-dropdown-btn:hover {\r\n  background: rgba(255, 255, 255, 0.3);\r\n  transform: scale(1.05);\r\n}\r\n\r\n.user-dropdown-btn[aria-expanded=\"true\"] {\r\n  background: rgba(255, 255, 255, 0.35);\r\n}\r\n\r\n.btn-outline-light {\r\n  border: 2px solid rgba(255, 255, 255, 0.8);\r\n  color: white;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn-outline-light:hover {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: white;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.btn-light {\r\n  background: white;\r\n  color: #667eea;\r\n  font-weight: 600;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn-light:hover {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  color: #764ba2;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n/* 移动端优化 */\r\n@media (max-width: 991px) {\r\n  .navbar {\r\n    padding: 0.75rem 0;\r\n  }\r\n  \r\n  .navbar-brand {\r\n    font-size: 1.3rem;\r\n  }\r\n  \r\n  .brand-text {\r\n    font-size: 1.35rem;\r\n    letter-spacing: 2px;\r\n  }\r\n  \r\n  .navbar-nav .nav-link {\r\n    padding: 0.75rem 1rem;\r\n  }\r\n  \r\n  .dropdown-menu {\r\n    min-width: 180px;\r\n    max-width: calc(100vw - 30px);\r\n    position: absolute !important;\r\n    right: 0;\r\n    left: auto;\r\n    margin-top: 0.5rem;\r\n  }\r\n  \r\n  .user-dropdown-btn {\r\n    font-size: 0.9rem;\r\n    z-index: 1051;\r\n  }\r\n  \r\n  /* 确保下拉菜单不会被导航栏遮挡 */\r\n  .dropdown.show {\r\n    overflow: visible;\r\n  }\r\n  \r\n  /* 移动端确保下拉菜单在最上层 */\r\n  .dropdown {\r\n    z-index: 1050;\r\n  }\r\n  \r\n  .navbar-collapse {\r\n    z-index: 1049;\r\n  }\r\n}\r\n</style>\r\n\r\n","import { render } from \"./NavBar.vue?vue&type=template&id=a6dd4bee&scoped=true\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=a6dd4bee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a6dd4bee\"]])\n\nexport default __exports__","<template>\n  <div class=\"auth-wrapper\">\n    <NavBar />\n    <div class=\"login-container\">\n    <div class=\"container\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-6 col-lg-4\">\n          <div class=\"card shadow-lg\">\n            <div class=\"card-body p-5\">\n              <h2 class=\"text-center mb-2\">用户登录</h2>\n              <p class=\"login-slogan text-center mb-4\">Hello Roamioer!</p>\n              \n              <form @submit.prevent=\"handleLogin\">\n                <!-- 用户名 -->\n                <div class=\"mb-3\">\n                  <label for=\"username\" class=\"form-label\">用户名</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"username\"\n                    v-model=\"form.username\"\n                    required\n                    placeholder=\"请输入用户名\"\n                  />\n                </div>\n                \n                <!-- 密码 -->\n                <div class=\"mb-3\">\n                  <label for=\"password\" class=\"form-label\">密码</label>\n                  <input\n                    type=\"password\"\n                    class=\"form-control\"\n                    id=\"password\"\n                    v-model=\"form.password\"\n                    required\n                    placeholder=\"请输入密码\"\n                  />\n                </div>\n                \n                <!-- 错误提示 -->\n                <div v-if=\"error\" class=\"alert alert-danger\" role=\"alert\">\n                  {{ error }}\n                </div>\n                \n                <!-- 登录按钮 -->\n                <button\n                  type=\"submit\"\n                  class=\"btn btn-primary w-100 mb-2\"\n                  :disabled=\"loading\"\n                >\n                  <span v-if=\"loading\" class=\"spinner-border spinner-border-sm me-2\"></span>\n                  {{ loading ? '登录中...' : '登录' }}\n                </button>\n                \n                <!-- 忘记密码 -->\n                <div class=\"text-end mb-3\">\n                  <router-link to=\"/forgot-password/\" class=\"text-decoration-none small text-primary\">\n                    忘记密码？\n                  </router-link>\n                </div>\n                \n                <!-- QQ登录 -->\n                <div class=\"text-center mb-3\">\n                  <div class=\"divider\">\n                    <span class=\"divider-text\">或</span>\n                  </div>\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-secondary w-100 qq-login-btn\"\n                    :disabled=\"qqLoginLoading\"\n                    @click=\"handleQQLogin\"\n                  >\n                    <img src=\"@/assets/qq_logo.png\" alt=\"QQ登录\" class=\"qq-login-icon\" width=\"20\" height=\"20\">\n                    <span v-if=\"qqLoginLoading\">跳转中...</span>\n                    <span v-else>使用QQ登录</span>\n                  </button>\n                </div>\n                \n                <!-- 注册链接 -->\n                <div class=\"text-center\">\n                  <span class=\"text-muted\">还没有账号？</span>\n                  <router-link to=\"/register\" class=\"text-decoration-none\">立即注册</router-link>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    </div>\n    </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useUserStore } from '@/stores'\nimport { getQQLoginUrl } from '@/api/auth'\nimport NavBar from '@/components/NavBar.vue'\n\nexport default {\n  name: 'LoginView',\n  components: { NavBar },\n  \n  setup() {\n    const router = useRouter()\n    const userStore = useUserStore()\n    \n    const form = ref({\n      username: '',\n      password: ''\n    })\n    \n    const loading = ref(false)\n    const error = ref('')\n    const qqLoginLoading = ref(false)\n    \n    const handleLogin = async () => {\n      loading.value = true\n      error.value = ''\n      \n      try {\n        await userStore.login(form.value)\n        \n        // 登录成功，跳转到首页\n        router.push('/')\n      } catch (err) {\n        // 优先显示API返回的中文错误信息\n        if (err.response?.data) {\n          const data = err.response.data\n          \n          // 处理字段错误\n          if (data.username && Array.isArray(data.username)) {\n            error.value = data.username[0]\n          } else if (data.password && Array.isArray(data.password)) {\n            error.value = data.password[0]\n          } else if (data.non_field_errors && Array.isArray(data.non_field_errors)) {\n            error.value = data.non_field_errors[0]\n          } else if (typeof data === 'string') {\n            error.value = data\n          } else if (data.detail) {\n            error.value = data.detail\n          } else {\n            error.value = '登录失败，请检查用户名和密码'\n          }\n        } else {\n          error.value = err.message || '登录失败，请检查用户名和密码'\n        }\n      } finally {\n        loading.value = false\n      }\n    }\n    \n    const handleQQLogin = async () => {\n      qqLoginLoading.value = true\n      try {\n        const response = await getQQLoginUrl()\n        if (response.authorize_url && response.state) {\n          // 保存state到sessionStorage用于验证\n          sessionStorage.setItem('qq_oauth_state', response.state)\n          // 跳转到QQ授权页面\n          window.location.href = response.authorize_url\n        } else {\n          error.value = '获取QQ登录链接失败，请重试'\n          qqLoginLoading.value = false\n        }\n      } catch (err) {\n        error.value = err.response?.data?.error || 'QQ登录失败，请重试'\n        qqLoginLoading.value = false\n      }\n    }\n    \n    return {\n      form,\n      loading,\n      error,\n      qqLoginLoading,\n      handleLogin,\n      handleQQLogin\n    }\n  }\n}\n</script>\n\n<style scoped>\n.auth-wrapper {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.login-container {\n  min-height: calc(100vh - 64px);\n  display: flex;\n  align-items: center;\n  padding-top: 20px;\n}\n\n.card {\n  border: none;\n  border-radius: 15px;\n}\n\n.btn-primary {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border: none;\n}\n\n.btn-primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.login-slogan {\n  color: #6c63ff;\n  font-weight: 600;\n  letter-spacing: 0.5px;\n  text-shadow: 0 2px 8px rgba(108, 99, 255, 0.25);\n}\n\n.divider {\n  position: relative;\n  text-align: center;\n  margin: 20px 0;\n}\n\n.divider::before,\n.divider::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  width: 45%;\n  height: 1px;\n  background: #dee2e6;\n}\n\n.divider::before {\n  left: 0;\n}\n\n.divider::after {\n  right: 0;\n}\n\n.divider-text {\n  background: white;\n  padding: 0 10px;\n  color: #6c757d;\n  font-size: 14px;\n}\n\n.qq-login-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 10px;\n  border: 1px solid #dee2e6;\n  transition: all 0.3s ease;\n}\n\n.qq-login-btn:hover {\n  background-color: #f8f9fa;\n  border-color: #adb5bd;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.qq-login-icon {\n  margin-right: 5px;\n}\n</style>\n\n","import { render } from \"./LoginView.vue?vue&type=template&id=12b6a1f2&scoped=true\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=12b6a1f2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-12b6a1f2\"]])\n\nexport default __exports__"],"names":["class","id","style","href","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_router_link","to","_cache","type","_hoisted_3","_hoisted_4","_hoisted_5","$setup","isLoggedIn","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","src","avatar","alt","width","height","_toDisplayString","username","_hoisted_11","onClick","_withModifiers","args","handleLogout","_Fragment","key","name","setup","router","useRouter","userStore","useUserStore","computed","async","confirm","logout","push","error","console","__exports__","render","role","_component_NavBar","onSubmit","handleLogin","for","form","$event","required","placeholder","password","_hoisted_10","disabled","loading","_hoisted_12","_hoisted_13","_hoisted_14","qqLoginLoading","handleQQLogin","_imports_0","_hoisted_16","_hoisted_17","_hoisted_18","components","NavBar","ref","value","login","err","response","data","Array","isArray","non_field_errors","detail","message","getQQLoginUrl","authorize_url","state","sessionStorage","setItem","window","location"],"sourceRoot":""}