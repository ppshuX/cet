# 用户等级系统说明

## 🎖️ 等级系统

### 等级列表

| 等级 | 英文名 | 图标 | 说明 |
|------|--------|------|------|
| 🌱 新手 | novice | 🌱 | 刚加入的新用户 |
| 🔍 探索者 | explorer | 🔍 | 开始探索旅行 |
| 🌍 漫游者 | wanderer | 🌍 | 积累了一定经验 |
| ⛰️ 冒险家 | adventurer | ⛰️ | 经验丰富的旅行者 |
| 👑 旅行大师 | master | 👑 | 最高等级 |

## 📊 升级条件

### 新版等级计算逻辑（更平衡）

```python
def calculate_level(self):
    trips = 用户旅行计划数
    comments = 用户评论数
    
    if trips >= 20:
        return 'master'      # 旅行大师
    elif trips >= 10 or (trips >= 5 and comments >= 50):
        return 'adventurer'  # 冒险家
    elif trips >= 5 or (trips >= 3 and comments >= 20):
        return 'wanderer'    # 漫游者
    elif trips >= 1 or comments >= 5:
        return 'explorer'    # 探索者
    else:
        return 'novice'      # 新手
```

### 升级路径

#### 🌱 新手 → 🔍 探索者
- **路径1**：创建 1 个旅行计划
- **路径2**：发表 5 条评论

**示例：** J.Grigg（0旅行 + 77评论 = 探索者）

#### 🔍 探索者 → 🌍 漫游者
- **路径1**：创建 5 个旅行计划
- **路径2**：3 个旅行计划 + 20 条评论

**示例：**
- Alice（5旅行 + 0评论 = 漫游者）
- Bob（3旅行 + 25评论 = 漫游者）

#### 🌍 漫游者 → ⛰️ 冒险家
- **路径1**：创建 10 个旅行计划
- **路径2**：5 个旅行计划 + 50 条评论

**示例：**
- Charlie（10旅行 + 0评论 = 冒险家）
- David（5旅行 + 60评论 = 冒险家）

#### ⛰️ 冒险家 → 👑 旅行大师
- **路径1**：创建 20 个旅行计划
- **路径2**：10 个旅行计划 + 100 条评论

**示例：**
- Eve（20旅行 + 0评论 = 旅行大师）
- Frank（10旅行 + 150评论 = 旅行大师）

## 📈 等级判定对比

### 旧版逻辑（有问题）

```python
total = trips * 2 + comments
# 旅行权重：2分
# 评论权重：1分

if total >= 50:
    level = 'master'      # 77评论 = 77分 → 大师 ❌
```

**问题：**
- 只靠评论就能达到大师（50条评论就够了）
- 没有体现"旅行"的核心价值

### 新版逻辑（修复后）

```python
# 多重条件判断
if trips >= 20:                           # 20个旅行计划
    level = 'master'
elif trips >= 10 or (trips >= 5 and comments >= 50):  # 10个旅行 OR 5个旅行+50评论
    level = 'adventurer'
elif trips >= 5 or (trips >= 3 and comments >= 20):   # 5个旅行 OR 3个旅行+20评论
    level = 'wanderer'
elif trips >= 1 or comments >= 5:                     # 1个旅行 OR 5评论
    level = 'explorer'
```

**优点：**
- ✅ 旅行是主要升级路径
- ✅ 评论提供替代升级路径（但不能纯评论）
- ✅ 达到大师必须要有实际旅行经验

## 🎯 实际案例

### J.Grigg 的等级（你当前的情况）

```
旅行计划：0 个
评论数：77 条

判定：
  trips >= 1?   → No (0 < 1)
  comments >= 5? → Yes (77 >= 5)
  
结果：探索者 (explorer) ✅
```

**原因：**
- 虽然评论很多，但旅行计划为 0
- 新逻辑要求至少 1 个旅行计划才能达到更高等级
- 或者达到"总积分"要求（5个旅行计划 + 50条评论）

### 如何提升等级？

#### 提升到 🌍 漫游者
- **方法1**：创建 5 个旅行计划
- **方法2**：创建 3 个旅行计划（你还差 3 个）

#### 提升到 ⛰️ 冒险家
- **方法1**：创建 10 个旅行计划
- **方法2**：创建 5 个旅行计划 + 还需要评论到 50 条（你已经有 77 条了）

#### 提升到 👑 旅行大师
- **方法1**：创建 20 个旅行计划
- **方法2**：创建 10 个旅行计划（你就满足条件了！因为你已经有 77 条评论）

## 💡 等级徽章样式

### 新手 (Novice)
- 颜色：灰色渐变
- 渐变：`#e0e0e0 → #bdbdbd`

### 探索者 (Explorer)
- 颜色：蓝色
- 渐变：`#bbdefb → #90caf9`

### 漫游者 (Wanderer)
- 颜色：绿色
- 渐变：`#c8e6c9 → #a5d6a7`

### 冒险家 (Adventurer)
- 颜色：黄色
- 渐变：`#fff9c4 → #fff59d`

### 旅行大师 (Master)
- 颜色：金色
- 渐变：`#ffeb3b → #ffc107`

## 🔄 自动更新

等级会在以下情况自动更新：

1. **创建旅行计划** → 调用 `calculate_level()`
2. **更新个人资料** → 自动重新计算
3. **后台手动更新** → Django Admin 可以触发

## 📝 总结

**为什么你是"探索者"而不是"旅行大师"？**

- ❌ 旧逻辑：77条评论 = 77分 → 旅行大师（不合理）
- ✅ 新逻辑：0个旅行 + 77条评论 → 探索者（合理）

**升级建议：**
- 创建 10 个旅行计划 → 立即成为**旅行大师**（因为你有77条评论，已经满足"10个旅行 + 100评论"中的评论部分）
- 或者创建 3 个旅行计划 → 成为**漫游者**

