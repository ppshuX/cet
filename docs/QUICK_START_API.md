# üöÄ Âø´ÈÄüÂºÄÂßãÔºöÂâçÂêéÁ´ØÂàÜÁ¶ªÂÆûÊàò

## ‚ö° Âø´ÈÄü‰∏äÊâãÊåáÂçó

### Á¨¨‰∏ÄÊ≠•ÔºöÂÆâË£Ö‰æùËµñ

```bash
# ÂÆâË£ÖÂêéÁ´Ø‰æùËµñ
pip install -r requirements_api.txt

# ÂàõÂª∫Êï∞ÊçÆÂ∫ìËøÅÁßª
python manage.py makemigrations
python manage.py migrate

# ÂàõÂª∫Ë∂ÖÁ∫ßÁî®Êà∑ÔºàÂèØÈÄâÔºâ
python manage.py createsuperuser
```

### Á¨¨‰∫åÊ≠•ÔºöÂêØÂä®ÂêéÁ´ØÊúçÂä°

```bash
# ËøêË°åDjangoÂºÄÂèëÊúçÂä°Âô®
python manage.py runserver

# ËÆøÈóÆAPIÊñáÊ°£
# SwaggerÊñáÊ°£: http://127.0.0.1:8000/api/docs/
# ReDocÊñáÊ°£:   http://127.0.0.1:8000/api/redoc/
```

### Á¨¨‰∏âÊ≠•ÔºöÊµãËØïAPI

#### 1. Áî®Êà∑Ê≥®ÂÜå

```bash
curl -X POST http://127.0.0.1:8000/api/v1/auth/register/ \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "test1234",
    "password2": "test1234",
    "email": "test@example.com"
  }'
```

ÂìçÂ∫î:
```json
{
  "user": {
    "id": 1,
    "username": "testuser",
    "email": "test@example.com",
    "date_joined": "2025-10-27T12:00:00",
    "profile": {
      "avatar": null,
      "avatar_url": "/static/images/default_avatar.png"
    }
  },
  "access": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "refresh": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
```

#### 2. Áî®Êà∑ÁôªÂΩï

```bash
curl -X POST http://127.0.0.1:8000/api/v1/auth/login/ \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "test1234"
  }'
```

#### 3. Ëé∑ÂèñÊóÖË°åÂàóË°®

```bash
curl http://127.0.0.1:8000/api/v1/trips/
```

ÂìçÂ∫î:
```json
{
  "count": 5,
  "next": null,
  "previous": null,
  "results": [
    {
      "slug": "trip",
      "name": "Âé¶Èó®‰∏âÂ§©‰∏§ÊôöÊ∏∏",
      "description": "Êé¢Á¥¢Âé¶Èó®ÁöÑÊ§çÁâ©Âõ≠„ÄÅÈºìÊµ™Â±ø„ÄÅÂÖ´Â∏ÇÁæéÈ£ü",
      "stats": {
        "page": "trip",
        "views": 100,
        "likes": 50,
        "checked_in": false,
        "comments_count": 20
      }
    }
  ]
}
```

#### 4. ÁÇπËµûÊóÖË°å

```bash
curl -X POST http://127.0.0.1:8000/api/v1/trips/trip/like/
```

#### 5. Ëé∑ÂèñËØÑËÆ∫ÂàóË°®

```bash
curl "http://127.0.0.1:8000/api/v1/comments/?page=trip"
```

#### 6. ÂàõÂª∫ËØÑËÆ∫ÔºàÈúÄË¶ÅËÆ§ËØÅ‰∏îÊòØÁÆ°ÁêÜÂëòÔºâ

```bash
curl -X POST http://127.0.0.1:8000/api/v1/comments/ \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "page": "trip",
    "content": "ÂæàÊ£íÁöÑÊóÖË°åÔºÅ"
  }'
```

---

## üé® ÂâçÁ´ØÈ°πÁõÆÊê≠Âª∫

### ÊñπÊ°à‰∏ÄÔºöVue 3 + ViteÔºàÊé®ËçêÔºâ

```bash
# ÂàõÂª∫VueÈ°πÁõÆ
npm create vite@latest frontend -- --template vue
cd frontend

# ÂÆâË£Ö‰æùËµñ
npm install
npm install vue-router pinia axios
npm install element-plus
npm install @element-plus/icons-vue

# ÂêØÂä®ÂºÄÂèëÊúçÂä°Âô®
npm run dev
```

#### È°πÁõÆÁªìÊûÑ

```
frontend/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ favicon.ico
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/                    # APIÊé•Âè£Â∞ÅË£Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ request.js          # axiosÂ∞ÅË£Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.js             # ËÆ§ËØÅAPI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trip.js             # ÊóÖË°åAPI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ comment.js          # ËØÑËÆ∫API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.js             # Áî®Êà∑API
‚îÇ   ‚îú‚îÄ‚îÄ assets/                 # ÈùôÊÄÅËµÑÊ∫ê
‚îÇ   ‚îú‚îÄ‚îÄ components/             # ÂÖ¨ÂÖ±ÁªÑ‰ª∂
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.vue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Footer.vue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CommentList.vue
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CommentItem.vue
‚îÇ   ‚îú‚îÄ‚îÄ views/                  # È°µÈù¢ÁªÑ‰ª∂
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Home.vue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.vue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Register.vue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TripList.vue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TripDetail.vue
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserCenter.vue
‚îÇ   ‚îú‚îÄ‚îÄ router/                 # Ë∑ØÁî±ÈÖçÁΩÆ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ store/                  # Áä∂ÊÄÅÁÆ°ÁêÜ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ user.js
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ trip.js
‚îÇ   ‚îú‚îÄ‚îÄ utils/                  # Â∑•ÂÖ∑ÂáΩÊï∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.js
‚îÇ   ‚îú‚îÄ‚îÄ App.vue
‚îÇ   ‚îî‚îÄ‚îÄ main.js
‚îú‚îÄ‚îÄ .env.development            # ÂºÄÂèëÁéØÂ¢ÉÈÖçÁΩÆ
‚îú‚îÄ‚îÄ .env.production             # Áîü‰∫ßÁéØÂ¢ÉÈÖçÁΩÆ
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ vite.config.js
```

#### ÂÖ≥ÈîÆÈÖçÁΩÆÊñá‰ª∂

**.env.development**
```env
VITE_API_BASE_URL=http://127.0.0.1:8000/api/v1
VITE_APP_TITLE=CETÊóÖË°åÂπ≥Âè∞
```

**vite.config.js**
```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src')
    }
  },
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://127.0.0.1:8000',
        changeOrigin: true,
      }
    }
  }
})
```

**src/api/request.js**
```javascript
import axios from 'axios'
import { ElMessage } from 'element-plus'

const request = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  timeout: 10000,
})

// ËØ∑Ê±ÇÊã¶Êà™Âô®
request.interceptors.request.use(
  config => {
    const token = localStorage.getItem('access_token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  error => {
    return Promise.reject(error)
  }
)

// ÂìçÂ∫îÊã¶Êà™Âô®
request.interceptors.response.use(
  response => response.data,
  error => {
    const message = error.response?.data?.detail || 'ËØ∑Ê±ÇÂ§±Ë¥•'
    ElMessage.error(message)
    
    // 401Êú™ÊéàÊùÉÔºåË∑≥ËΩ¨ÁôªÂΩï
    if (error.response?.status === 401) {
      localStorage.removeItem('access_token')
      localStorage.removeItem('refresh_token')
      window.location.href = '/login'
    }
    
    return Promise.reject(error)
  }
)

export default request
```

**src/api/auth.js**
```javascript
import request from './request'

// Áî®Êà∑Ê≥®ÂÜå
export const register = (data) => {
  return request.post('/auth/register/', data)
}

// Áî®Êà∑ÁôªÂΩï
export const login = (data) => {
  return request.post('/auth/login/', data)
}

// Áî®Êà∑ÁôªÂá∫
export const logout = () => {
  const refresh = localStorage.getItem('refresh_token')
  return request.post('/auth/logout/', { refresh })
}

// Ëé∑ÂèñÂΩìÂâçÁî®Êà∑‰ø°ÊÅØ
export const getCurrentUser = () => {
  return request.get('/auth/me/')
}
```

**src/api/trip.js**
```javascript
import request from './request'

// Ëé∑ÂèñÊóÖË°åÂàóË°®
export const getTripList = (params) => {
  return request.get('/trips/', { params })
}

// Ëé∑ÂèñÊóÖË°åËØ¶ÊÉÖ
export const getTripDetail = (slug) => {
  return request.get(`/trips/${slug}/`)
}

// ÁÇπËµû
export const likeTrip = (slug) => {
  return request.post(`/trips/${slug}/like/`)
}

// ÊâìÂç°
export const checkinTrip = (slug) => {
  return request.post(`/trips/${slug}/checkin/`)
}

// Ëé∑ÂèñÁªüËÆ°
export const getTripStats = (slug) => {
  return request.get(`/trips/${slug}/stats/`)
}

// Ëé∑ÂèñËØÑËÆ∫
export const getTripComments = (slug, params) => {
  return request.get(`/trips/${slug}/comments/`, { params })
}
```

**src/store/modules/user.js**
```javascript
import { defineStore } from 'pinia'
import { login, register, logout, getCurrentUser } from '@/api/auth'

export const useUserStore = defineStore('user', {
  state: () => ({
    token: localStorage.getItem('access_token') || '',
    refreshToken: localStorage.getItem('refresh_token') || '',
    userInfo: null,
  }),
  
  getters: {
    isLoggedIn: (state) => !!state.token,
    username: (state) => state.userInfo?.username || '',
    avatar: (state) => state.userInfo?.profile?.avatar_url || '',
  },
  
  actions: {
    // ÁôªÂΩï
    async login(credentials) {
      const { access, refresh, user } = await login(credentials)
      this.token = access
      this.refreshToken = refresh
      this.userInfo = user
      localStorage.setItem('access_token', access)
      localStorage.setItem('refresh_token', refresh)
    },
    
    // Ê≥®ÂÜå
    async register(data) {
      const { access, refresh, user } = await register(data)
      this.token = access
      this.refreshToken = refresh
      this.userInfo = user
      localStorage.setItem('access_token', access)
      localStorage.setItem('refresh_token', refresh)
    },
    
    // ÁôªÂá∫
    async logout() {
      try {
        await logout()
      } finally {
        this.token = ''
        this.refreshToken = ''
        this.userInfo = null
        localStorage.removeItem('access_token')
        localStorage.removeItem('refresh_token')
      }
    },
    
    // Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ
    async getUserInfo() {
      if (!this.token) return
      const userInfo = await getCurrentUser()
      this.userInfo = userInfo
    },
  }
})
```

**src/views/Login.vue**
```vue
<template>
  <div class="login-container">
    <el-card class="login-card">
      <template #header>
        <h2>Áî®Êà∑ÁôªÂΩï</h2>
      </template>
      
      <el-form
        :model="form"
        :rules="rules"
        ref="formRef"
        @submit.prevent="handleLogin"
      >
        <el-form-item prop="username">
          <el-input
            v-model="form.username"
            placeholder="Áî®Êà∑Âêç"
            size="large"
          />
        </el-form-item>
        
        <el-form-item prop="password">
          <el-input
            v-model="form.password"
            type="password"
            placeholder="ÂØÜÁ†Å"
            size="large"
            show-password
          />
        </el-form-item>
        
        <el-form-item>
          <el-button
            type="primary"
            size="large"
            style="width: 100%"
            :loading="loading"
            @click="handleLogin"
          >
            ÁôªÂΩï
          </el-button>
        </el-form-item>
        
        <div class="links">
          <router-link to="/register">ËøòÊ≤°ÊúâË¥¶Âè∑ÔºüÁ´ãÂç≥Ê≥®ÂÜå</router-link>
        </div>
      </el-form>
    </el-card>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue'
import { useRouter } from 'vue-router'
import { useUserStore } from '@/store/modules/user'
import { ElMessage } from 'element-plus'

const router = useRouter()
const userStore = useUserStore()

const formRef = ref(null)
const loading = ref(false)

const form = reactive({
  username: '',
  password: '',
})

const rules = {
  username: [{ required: true, message: 'ËØ∑ËæìÂÖ•Áî®Êà∑Âêç', trigger: 'blur' }],
  password: [{ required: true, message: 'ËØ∑ËæìÂÖ•ÂØÜÁ†Å', trigger: 'blur' }],
}

const handleLogin = async () => {
  await formRef.value.validate()
  
  loading.value = true
  try {
    await userStore.login(form)
    ElMessage.success('ÁôªÂΩïÊàêÂäü')
    router.push('/')
  } catch (error) {
    console.error('ÁôªÂΩïÂ§±Ë¥•:', error)
  } finally {
    loading.value = false
  }
}
</script>

<style scoped>
.login-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.login-card {
  width: 400px;
}

.links {
  text-align: center;
  margin-top: 10px;
}

.links a {
  color: #409eff;
  text-decoration: none;
}
</style>
```

---

## üìù ÊÄªÁªì

‚úÖ **ÂêéÁ´ØAPIÂ∑≤ÈÖçÁΩÆÂÆåÊàê**
- Django REST Framework
- JWTËÆ§ËØÅ
- CORSË∑®Âüü
- APIÊñáÊ°£Ëá™Âä®ÁîüÊàê

‚úÖ **ÂâçÁ´ØÈ°πÁõÆÁªìÊûÑËÆæËÆ°ÂÆåÊàê**
- Vue 3 + Vite
- PiniaÁä∂ÊÄÅÁÆ°ÁêÜ
- Axios HTTPÂ∞ÅË£Ö
- Element Plus UI

üöÄ **‰∏ã‰∏ÄÊ≠•:**
1. ÊåâÁÖß‰∏äËø∞Ê≠•È™§ÂàõÂª∫ÂâçÁ´ØÈ°πÁõÆ
2. Â§çÂà∂Á§∫‰æã‰ª£Á†Å
3. ÂºÄÂßãÂºÄÂèëÂÖ∑‰ΩìÈ°µÈù¢
4. ËÅîË∞ÉÊµãËØï

üí° **ÊèêÁ§∫:**
- APIÊñáÊ°£Âú∞ÂùÄ: http://127.0.0.1:8000/api/docs/
- ÂâçÁ´ØÂºÄÂèëÊúçÂä°Âô®: http://localhost:5173
- ÂêéÁ´ØAPIÂú∞ÂùÄ: http://127.0.0.1:8000/api/v1/

**üéâ ÊÅ≠ÂñúÔºÅÂâçÂêéÁ´ØÂàÜÁ¶ªÊîπÈÄ†ÁöÑÂü∫Á°ÄÂ∑≤ÁªèÂÆåÊàêÔºÅ**

